[{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\accounts\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\backup\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedFile' is assigned a value but never used.","line":34,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport { MobileLayout } from '@/components/layouts/MobileLayout';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { \r\n  Download, \r\n  Upload, \r\n  Shield, \r\n  Database, \r\n  AlertTriangle,\r\n  CheckCircle2,\r\n  FileJson,\r\n  RefreshCw\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { backupService, BackupData } from '@/services/backupService';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\n\r\nexport default function BackupPage() {\r\n  const [downloading, setDownloading] = useState(false);\r\n  const [restoring, setRestoring] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [backupPreview, setBackupPreview] = useState<BackupData | null>(null);\r\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleExport = async () => {\r\n    const profileId = localStorage.getItem('profileId');\r\n    if (!profileId) {\r\n      toast.error('Perfil não encontrado');\r\n      return;\r\n    }\r\n\r\n    setDownloading(true);\r\n    try {\r\n      const blob = await backupService.exportBackup(profileId);\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `backup_${new Date().toISOString().split('T')[0]}.json`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      document.body.removeChild(a);\r\n      toast.success('Backup baixado com sucesso!');\r\n    } catch (error) {\r\n      console.error('Export error:', error);\r\n      toast.error('Erro ao exportar backup');\r\n    } finally {\r\n      setDownloading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    if (!file.name.endsWith('.json')) {\r\n      toast.error('Por favor, selecione um arquivo .json');\r\n      return;\r\n    }\r\n\r\n    setSelectedFile(file);\r\n\r\n    try {\r\n      const text = await file.text();\r\n      const backup = JSON.parse(text) as BackupData;\r\n      \r\n      if (!backup.version || !backup.data) {\r\n        toast.error('Arquivo de backup inválido');\r\n        setSelectedFile(null);\r\n        return;\r\n      }\r\n\r\n      setBackupPreview(backup);\r\n    } catch {\r\n      toast.error('Erro ao ler arquivo de backup');\r\n      setSelectedFile(null);\r\n    }\r\n  };\r\n\r\n  const handleRestore = async () => {\r\n    if (!backupPreview) return;\r\n\r\n    const profileId = localStorage.getItem('profileId');\r\n    if (!profileId) {\r\n      toast.error('Perfil não encontrado');\r\n      return;\r\n    }\r\n\r\n    setRestoring(true);\r\n    try {\r\n      const result = await backupService.restoreBackup(profileId, backupPreview);\r\n      \r\n      if (result.success) {\r\n        const total = Object.values(result.restored).reduce((a, b) => a + b, 0);\r\n        toast.success(`Backup restaurado! ${total} itens recuperados.`);\r\n        setSelectedFile(null);\r\n        setBackupPreview(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('Restore error:', error);\r\n      toast.error('Erro ao restaurar backup');\r\n    } finally {\r\n      setRestoring(false);\r\n      setShowConfirmDialog(false);\r\n    }\r\n  };\r\n\r\n  const getBackupStats = (backup: BackupData) => {\r\n    const stats = [];\r\n    if (backup.data.categories?.length) stats.push(`${backup.data.categories.length} categorias`);\r\n    if (backup.data.movements?.length) stats.push(`${backup.data.movements.length} movimentações`);\r\n    if (backup.data.creditCards?.length) stats.push(`${backup.data.creditCards.length} cartões`);\r\n    if (backup.data.debts?.length) stats.push(`${backup.data.debts.length} dívidas`);\r\n    if (backup.data.reserves?.length) stats.push(`${backup.data.reserves.length} reservas`);\r\n    if (backup.data.budgets?.length) stats.push(`${backup.data.budgets.length} orçamentos`);\r\n    if (backup.data.recurringTransactions?.length) stats.push(`${backup.data.recurringTransactions.length} recorrentes`);\r\n    return stats;\r\n  };\r\n\r\n  return (\r\n    <MobileLayout>\r\n      <div className=\"space-y-6\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-2xl font-bold tracking-tight flex items-center gap-2 mb-2\">\r\n            <Database className=\"h-6 w-6\" />\r\n            Backup de Dados\r\n          </h1>\r\n          <p className=\"text-muted-foreground\">\r\n            Gerencie cópias de segurança dos seus dados financeiros.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Export Section */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n              <Download className=\"h-5 w-5 text-green-600\" />\r\n              Exportar Backup\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Baixe uma cópia completa dos seus dados financeiros\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"p-4 bg-green-50 rounded-lg border border-green-200\">\r\n              <p className=\"text-sm text-green-700\">\r\n                O backup inclui: categorias, movimentações, cartões, dívidas, reservas, orçamentos e transações recorrentes.\r\n              </p>\r\n            </div>\r\n            <Button \r\n              className=\"w-full\" \r\n              onClick={handleExport}\r\n              disabled={downloading}\r\n            >\r\n              {downloading ? (\r\n                <>\r\n                  <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Gerando backup...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Download className=\"h-4 w-4 mr-2\" />\r\n                  Baixar Backup (JSON)\r\n                </>\r\n              )}\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Import Section */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n              <Upload className=\"h-5 w-5 text-blue-600\" />\r\n              Restaurar Backup\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Restaure seus dados a partir de um arquivo de backup\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"p-4 bg-amber-50 rounded-lg border border-amber-200\">\r\n              <div className=\"flex items-start gap-2\">\r\n                <AlertTriangle className=\"h-5 w-5 text-amber-600 mt-0.5\" />\r\n                <p className=\"text-sm text-amber-700\">\r\n                  <strong>Atenção:</strong> Restaurar um backup irá substituir todos os seus dados atuais. Esta ação não pode ser desfeita.\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <Input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\".json\"\r\n              onChange={handleFileSelect}\r\n              className=\"cursor-pointer\"\r\n            />\r\n\r\n            {backupPreview && (\r\n              <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FileJson className=\"h-5 w-5 text-blue-600\" />\r\n                  <span className=\"font-medium text-blue-700\">Arquivo selecionado</span>\r\n                </div>\r\n                <p className=\"text-xs text-blue-600\">\r\n                  Data do backup: {new Date(backupPreview.exportDate).toLocaleString('pt-BR')}\r\n                </p>\r\n                <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                  {getBackupStats(backupPreview).map((stat, i) => (\r\n                    <span key={i} className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\">\r\n                      {stat}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <Button \r\n              className=\"w-full\" \r\n              variant=\"destructive\"\r\n              onClick={() => setShowConfirmDialog(true)}\r\n              disabled={!backupPreview || restoring}\r\n            >\r\n              {restoring ? (\r\n                <>\r\n                  <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Restaurando...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Upload className=\"h-4 w-4 mr-2\" />\r\n                  Restaurar Dados\r\n                </>\r\n              )}\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Tips */}\r\n        <Card className=\"border-primary/20\">\r\n          <CardContent className=\"p-4\">\r\n            <h3 className=\"font-semibold mb-2 flex items-center gap-2\">\r\n              <CheckCircle2 className=\"h-4 w-4 text-primary\" />\r\n              Dicas de Segurança\r\n            </h3>\r\n            <ul className=\"text-sm text-muted-foreground space-y-1\">\r\n              <li>• Faça backups regularmente (pelo menos 1x por mês)</li>\r\n              <li>• Guarde seus backups em local seguro (Google Drive, Dropbox)</li>\r\n              <li>• Não compartilhe arquivos de backup - contém dados financeiros</li>\r\n            </ul>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Confirmation Dialog */}\r\n      <AlertDialog open={showConfirmDialog} onOpenChange={setShowConfirmDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Confirmar Restauração</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Você tem certeza que deseja restaurar este backup? Todos os seus dados atuais serão substituídos pelos dados do backup.\r\n              <br /><br />\r\n              <strong>Esta ação não pode ser desfeita.</strong>\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancelar</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleRestore}>\r\n              Sim, Restaurar\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </MobileLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\budgets\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\categories\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\credit-cards\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1381,1384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1381,1384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchCardDetails' and 'fetchInvoices'. Either include them or remove the dependency array.","line":123,"column":8,"nodeType":"ArrayExpression","endLine":123,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [fetchCardDetails, fetchInvoices, params.id]","fix":{"range":[4353,4364],"text":"[fetchCardDetails, fetchInvoices, params.id]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":150,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":150,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":241,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":241,"endColumn":45},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":328,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[16343,16405],"text":"Use o botão &quot;Fechar Fatura\" para consolidar as compras do mês."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[16343,16405],"text":"Use o botão &ldquo;Fechar Fatura\" para consolidar as compras do mês."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[16343,16405],"text":"Use o botão &#34;Fechar Fatura\" para consolidar as compras do mês."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[16343,16405],"text":"Use o botão &rdquo;Fechar Fatura\" para consolidar as compras do mês."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":328,"column":87,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[16343,16405],"text":"Use o botão \"Fechar Fatura&quot; para consolidar as compras do mês."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[16343,16405],"text":"Use o botão \"Fechar Fatura&ldquo; para consolidar as compras do mês."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[16343,16405],"text":"Use o botão \"Fechar Fatura&#34; para consolidar as compras do mês."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[16343,16405],"text":"Use o botão \"Fechar Fatura&rdquo; para consolidar as compras do mês."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":336,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":336,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16770,16773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16770,16773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":384,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":384,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19578,19581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19578,19581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { MobileLayout } from '@/components/layouts/MobileLayout';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { \r\n  ChevronLeft, \r\n  CreditCard as CreditCardIcon, \r\n  FileText, \r\n  ShoppingBag,\r\n  Receipt,\r\n  DollarSign,\r\n  Calendar,\r\n  CheckCircle2,\r\n  AlertCircle,\r\n  Clock\r\n} from 'lucide-react';\r\nimport { creditCardsService, CreditCard, CreditCardInvoice } from '@/services/creditCardsService';\r\nimport { categoriesService, Category } from '@/services/categoriesService';\r\nimport { toast } from 'sonner';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\n\r\ninterface ExtendedCreditCard extends CreditCard {\r\n    purchases: any[];\r\n}\r\n\r\ninterface InvoiceWithAmount extends CreditCardInvoice {\r\n    amount?: number;\r\n}\r\n\r\nexport default function CardDashboardPage() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const [card, setCard] = useState<ExtendedCreditCard | null>(null);\r\n    const [invoices, setInvoices] = useState<InvoiceWithAmount[]>([]);\r\n    const [categories, setCategories] = useState<Category[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    \r\n    // Payment Modal State\r\n    const [paymentModalOpen, setPaymentModalOpen] = useState(false);\r\n    const [selectedInvoice, setSelectedInvoice] = useState<InvoiceWithAmount | null>(null);\r\n    const [paymentType, setPaymentType] = useState<'total' | 'partial' | 'minimum'>('total');\r\n    const [paymentAmount, setPaymentAmount] = useState('');\r\n    const [selectedCategory, setSelectedCategory] = useState('');\r\n    const [paymentLoading, setPaymentLoading] = useState(false);\r\n    \r\n    // Close Invoice Modal State\r\n    const [closeInvoiceModalOpen, setCloseInvoiceModalOpen] = useState(false);\r\n\r\n    const formatCurrency = (value: number | undefined | null) => {\r\n        const safeValue = Number(value);\r\n        if (isNaN(safeValue)) return 'R$ 0,00';\r\n        return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(safeValue);\r\n    };\r\n\r\n    const getMonthName = (monthStr: string, year: number) => {\r\n        const months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', \r\n                       'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\r\n        const monthNum = parseInt(monthStr) - 1;\r\n        return `${months[monthNum] || monthStr}/${year}`;\r\n    };\r\n\r\n    const fetchCardDetails = async () => {\r\n        try {\r\n            const data = await creditCardsService.getOne(params.id as string) as ExtendedCreditCard;\r\n            setCard(data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch card details', error);\r\n            toast.error('Erro ao carregar detalhes do cartão');\r\n            router.push('/credit-cards');\r\n        }\r\n    };\r\n\r\n    const fetchInvoices = async () => {\r\n        try {\r\n            const data = await creditCardsService.getInvoices(params.id as string);\r\n            setInvoices(data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch invoices', error);\r\n        }\r\n    };\r\n\r\n    const fetchCategories = async () => {\r\n        try {\r\n            const data = await categoriesService.getAll();\r\n            setCategories(data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch categories', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const loadData = async () => {\r\n            setLoading(true);\r\n            await Promise.all([fetchCardDetails(), fetchInvoices(), fetchCategories()]);\r\n            setLoading(false);\r\n        };\r\n        if (params.id) {\r\n            loadData();\r\n        }\r\n    }, [params.id]);\r\n\r\n    const openPaymentModal = (invoice: InvoiceWithAmount) => {\r\n        setSelectedInvoice(invoice);\r\n        const amount = Number(invoice.amount) || Number(invoice.totalAmount) || 0;\r\n        setPaymentAmount(amount.toFixed(2));\r\n        setPaymentType('total');\r\n        setSelectedCategory('');\r\n        setPaymentModalOpen(true);\r\n    };\r\n\r\n    const handlePayment = async () => {\r\n        if (!selectedInvoice) return;\r\n        \r\n        setPaymentLoading(true);\r\n        try {\r\n            const profileId = localStorage.getItem('profileId') || '';\r\n            if (!profileId) throw new Error(\"Perfil não encontrado\");\r\n\r\n            await creditCardsService.payInvoice(selectedInvoice.id, { \r\n                profileId,\r\n                categoryId: selectedCategory || undefined\r\n            });\r\n            \r\n            toast.success(\"Pagamento registrado com sucesso!\");\r\n            setPaymentModalOpen(false);\r\n            fetchInvoices();\r\n        } catch (e) {\r\n            toast.error(\"Erro ao registrar pagamento\");\r\n        } finally {\r\n            setPaymentLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStatusBadge = (status: string, paid?: boolean) => {\r\n        if (paid || status === 'PAID') {\r\n            return <Badge className=\"bg-green-100 text-green-700 border-green-300\"><CheckCircle2 className=\"h-3 w-3 mr-1\" />Paga</Badge>;\r\n        }\r\n        if (status === 'CLOSED') {\r\n            return <Badge className=\"bg-yellow-100 text-yellow-700 border-yellow-300\"><Clock className=\"h-3 w-3 mr-1\" />Fechada</Badge>;\r\n        }\r\n        return <Badge className=\"bg-blue-100 text-blue-700 border-blue-300\"><AlertCircle className=\"h-3 w-3 mr-1\" />Aberta</Badge>;\r\n    };\r\n\r\n    if (loading) return <MobileLayout><div className=\"p-4 text-center\">Carregando...</div></MobileLayout>;\r\n    if (!card) return <MobileLayout><div className=\"p-4 text-center\">Cartão não encontrado</div></MobileLayout>;\r\n\r\n    return (\r\n        <MobileLayout>\r\n            <div className=\"space-y-6\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center gap-2\">\r\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => router.push('/credit-cards')}>\r\n                        <ChevronLeft className=\"h-6 w-6\" />\r\n                    </Button>\r\n                    <h1 className=\"text-xl font-bold\">{card.cardName}</h1>\r\n                </div>\r\n\r\n                {/* Card Visual */}\r\n                <Card className=\"bg-linear-to-r from-slate-900 to-slate-800 text-white border-0\">\r\n                    <CardHeader className=\"pb-2\">\r\n                         <div className=\"flex justify-between items-start\">\r\n                            <CardTitle className=\"text-lg text-white\">{card.bank}</CardTitle>\r\n                            <CreditCardIcon className=\"h-6 w-6 opacity-70\" />\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                          <div className=\"text-2xl font-mono tracking-wider mb-4\">\r\n                            •••• {card.cardNumber.slice(-4)}\r\n                        </div>\r\n                        <div className=\"flex justify-between text-sm opacity-90\">\r\n                            <div>\r\n                                <p className=\"text-xs text-slate-300\">Limite</p>\r\n                                <p className=\"font-semibold\">{formatCurrency(card.limit)}</p>\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <p className=\"text-xs text-slate-300\">Fechamento</p>\r\n                                <p className=\"font-semibold\">Dia {card.closingDay}</p>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                                <p className=\"text-xs text-slate-300\">Vencimento</p>\r\n                                <p className=\"font-semibold\">Dia {card.dueDay}</p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                 {/* Quick Actions */}\r\n                 <div className=\"grid grid-cols-2 gap-4\">\r\n                    <Button variant=\"outline\" className=\"h-auto py-4 flex flex-col gap-2\" onClick={() => router.push(`/credit-cards/${card.id}/purchase`)}>\r\n                        <ShoppingBag className=\"h-5 w-5 text-blue-500\" />\r\n                        <span className=\"text-xs\">Nova Compra</span>\r\n                    </Button>\r\n                    \r\n                    <Dialog open={closeInvoiceModalOpen} onOpenChange={setCloseInvoiceModalOpen}>\r\n                        <DialogTrigger asChild>\r\n                            <Button variant=\"outline\" className=\"h-auto py-4 flex flex-col gap-2\">\r\n                                <FileText className=\"h-5 w-5 text-green-600\" />\r\n                                <span className=\"text-xs\">Fechar Fatura</span>\r\n                            </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent>\r\n                            <DialogHeader>\r\n                                <DialogTitle>Fechar Fatura</DialogTitle>\r\n                                <DialogDescription>\r\n                                    Selecione o mês e ano para encerrar a fatura. Isso congelará os lançamentos.\r\n                                </DialogDescription>\r\n                            </DialogHeader>\r\n                            <form onSubmit={async (e) => {\r\n                                e.preventDefault();\r\n                                const formData = new FormData(e.currentTarget);\r\n                                const month = Number(formData.get('month'));\r\n                                const year = Number(formData.get('year'));\r\n                                try {\r\n                                    await creditCardsService.closeInvoice(card.id, year, month);\r\n                                    toast.success(\"Fatura fechada com sucesso!\");\r\n                                    setCloseInvoiceModalOpen(false);\r\n                                    fetchInvoices();\r\n                                } catch (err) {\r\n                                    toast.error(\"Erro ao fechar fatura (verifique se já existe).\");\r\n                                }\r\n                            }}>\r\n                                <div className=\"grid gap-4 py-4\">\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        <div className=\"grid gap-2\">\r\n                                            <Label htmlFor=\"month\">Mês</Label>\r\n                                            <Input id=\"month\" name=\"month\" type=\"number\" min=\"1\" max=\"12\" defaultValue={new Date().getMonth() + 1} required />\r\n                                        </div>\r\n                                        <div className=\"grid gap-2\">\r\n                                            <Label htmlFor=\"year\">Ano</Label>\r\n                                            <Input id=\"year\" name=\"year\" type=\"number\" min=\"2020\" defaultValue={new Date().getFullYear()} required />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <DialogFooter>\r\n                                    <Button type=\"button\" variant=\"outline\" onClick={() => setCloseInvoiceModalOpen(false)}>\r\n                                        Cancelar\r\n                                    </Button>\r\n                                    <Button type=\"submit\">Confirmar Fechamento</Button>\r\n                                </DialogFooter>\r\n                            </form>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </div>\r\n\r\n                {/* Invoices & History Tabs */}\r\n                <Tabs defaultValue=\"invoices\">\r\n                    <TabsList className=\"w-full\">\r\n                        <TabsTrigger value=\"invoices\" className=\"flex-1\">\r\n                            <Receipt className=\"h-4 w-4 mr-1\" />\r\n                            Faturas\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"purchases\" className=\"flex-1\">\r\n                            <ShoppingBag className=\"h-4 w-4 mr-1\" />\r\n                            Compras\r\n                        </TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <TabsContent value=\"invoices\" className=\"space-y-4 mt-4\">\r\n                        {invoices && invoices.length > 0 ? (\r\n                            invoices.map(invoice => {\r\n                                const amount = Number(invoice.amount) || Number(invoice.totalAmount) || 0;\r\n                                const isPaid = invoice.paid || invoice.status === 'PAID';\r\n                                const isClosed = invoice.status === 'CLOSED';\r\n                                \r\n                                return (\r\n                                    <Card key={invoice.id} className={isPaid ? 'border-green-200 bg-green-50/30' : ''}>\r\n                                        <CardContent className=\"p-4\">\r\n                                            <div className=\"flex items-center justify-between mb-2\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                    <p className=\"font-medium\">{getMonthName(invoice.month, invoice.year)}</p>\r\n                                                </div>\r\n                                                {getStatusBadge(invoice.status, invoice.paid)}\r\n                                            </div>\r\n                                            \r\n                                            <div className=\"flex items-center justify-between mt-3\">\r\n                                                <div>\r\n                                                    <p className=\"text-2xl font-bold\">{formatCurrency(amount)}</p>\r\n                                                    {invoice.dueDate && (\r\n                                                        <p className=\"text-xs text-muted-foreground\">\r\n                                                            Vencimento: {new Date(invoice.dueDate).toLocaleDateString('pt-BR')}\r\n                                                        </p>\r\n                                                    )}\r\n                                                </div>\r\n                                                \r\n                                                {!isPaid && isClosed && (\r\n                                                    <Button \r\n                                                        size=\"sm\" \r\n                                                        onClick={() => openPaymentModal(invoice)}\r\n                                                        className=\"bg-green-600 hover:bg-green-700\"\r\n                                                    >\r\n                                                        <DollarSign className=\"h-4 w-4 mr-1\" />\r\n                                                        Pagar\r\n                                                    </Button>\r\n                                                )}\r\n                                            </div>\r\n                                        </CardContent>\r\n                                    </Card>\r\n                                );\r\n                            })\r\n                        ) : (\r\n                            <div className=\"text-center py-8 text-muted-foreground\">\r\n                                <Receipt className=\"h-12 w-12 mx-auto mb-2 opacity-30\" />\r\n                                <p>Nenhuma fatura fechada ainda.</p>\r\n                                <p className=\"text-xs mt-1\">Use o botão \"Fechar Fatura\" para consolidar as compras do mês.</p>\r\n                            </div>\r\n                        )}\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"purchases\" className=\"mt-4\">\r\n                        <div className=\"space-y-2\">\r\n                             {card.purchases && card.purchases.length > 0 ? (\r\n                                card.purchases.map((p: any) => (\r\n                                    <div key={p.id} className=\"flex justify-between p-3 border rounded-md bg-card\">\r\n                                        <div>\r\n                                            <p className=\"font-medium\">{p.productName}</p>\r\n                                            <p className=\"text-xs text-muted-foreground\">\r\n                                                {p.installments}x de {formatCurrency(p.totalValue / p.installments)}\r\n                                            </p>\r\n                                        </div>\r\n                                        <span className=\"font-semibold\">{formatCurrency(p.totalValue)}</span>\r\n                                    </div>\r\n                                ))\r\n                             ) : (\r\n                                <div className=\"text-center py-8 text-muted-foreground\">\r\n                                    <ShoppingBag className=\"h-12 w-12 mx-auto mb-2 opacity-30\" />\r\n                                    <p>Nenhuma compra parcelada registrada.</p>\r\n                                </div>\r\n                             )}\r\n                        </div>\r\n                    </TabsContent>\r\n                </Tabs>\r\n            </div>\r\n\r\n            {/* Payment Modal */}\r\n            <Dialog open={paymentModalOpen} onOpenChange={setPaymentModalOpen}>\r\n                <DialogContent className=\"sm:max-w-md\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"flex items-center gap-2\">\r\n                            <DollarSign className=\"h-5 w-5 text-green-600\" />\r\n                            Registrar Pagamento\r\n                        </DialogTitle>\r\n                        <DialogDescription>\r\n                            {card?.cardName} - {selectedInvoice && getMonthName(selectedInvoice.month, selectedInvoice.year)}\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n\r\n                    <div className=\"space-y-4 py-4\">\r\n                        {/* Invoice Total */}\r\n                        <div className=\"p-4 bg-muted rounded-lg text-center\">\r\n                            <p className=\"text-sm text-muted-foreground\">Valor da Fatura</p>\r\n                            <p className=\"text-3xl font-bold text-primary\">\r\n                                {formatCurrency(Number(selectedInvoice?.amount) || Number(selectedInvoice?.totalAmount))}\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* Payment Type */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Tipo de Pagamento</Label>\r\n                            <RadioGroup value={paymentType} onValueChange={(v) => {\r\n                                setPaymentType(v as any);\r\n                                const total = Number(selectedInvoice?.amount) || Number(selectedInvoice?.totalAmount) || 0;\r\n                                if (v === 'total') setPaymentAmount(total.toFixed(2));\r\n                                else if (v === 'minimum') setPaymentAmount((total * 0.15).toFixed(2)); // 15% mínimo\r\n                                else setPaymentAmount('');\r\n                            }} className=\"grid grid-cols-3 gap-2\">\r\n                                <div>\r\n                                    <RadioGroupItem value=\"total\" id=\"total\" className=\"peer sr-only\" />\r\n                                    <Label \r\n                                        htmlFor=\"total\" \r\n                                        className=\"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-green-600 peer-data-[state=checked]:bg-green-50 cursor-pointer\"\r\n                                    >\r\n                                        <CheckCircle2 className=\"h-5 w-5 mb-1 text-green-600\" />\r\n                                        <span className=\"text-xs font-medium\">Total</span>\r\n                                    </Label>\r\n                                </div>\r\n                                <div>\r\n                                    <RadioGroupItem value=\"partial\" id=\"partial\" className=\"peer sr-only\" />\r\n                                    <Label \r\n                                        htmlFor=\"partial\" \r\n                                        className=\"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-yellow-600 peer-data-[state=checked]:bg-yellow-50 cursor-pointer\"\r\n                                    >\r\n                                        <Receipt className=\"h-5 w-5 mb-1 text-yellow-600\" />\r\n                                        <span className=\"text-xs font-medium\">Parcial</span>\r\n                                    </Label>\r\n                                </div>\r\n                                <div>\r\n                                    <RadioGroupItem value=\"minimum\" id=\"minimum\" className=\"peer sr-only\" />\r\n                                    <Label \r\n                                        htmlFor=\"minimum\" \r\n                                        className=\"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-red-600 peer-data-[state=checked]:bg-red-50 cursor-pointer\"\r\n                                    >\r\n                                        <AlertCircle className=\"h-5 w-5 mb-1 text-red-600\" />\r\n                                        <span className=\"text-xs font-medium\">Mínimo</span>\r\n                                    </Label>\r\n                                </div>\r\n                            </RadioGroup>\r\n                        </div>\r\n\r\n                        {/* Warning for minimum payment */}\r\n                        {paymentType === 'minimum' && (\r\n                            <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700\">\r\n                                ⚠️ O pagamento mínimo acarreta juros sobre o saldo restante.\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Amount */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"paymentAmount\">Valor Pago (R$)</Label>\r\n                            <Input\r\n                                id=\"paymentAmount\"\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={paymentAmount}\r\n                                onChange={(e) => setPaymentAmount(e.target.value)}\r\n                                disabled={paymentType === 'total'}\r\n                                placeholder=\"0.00\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Category */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Categoria da Despesa</Label>\r\n                            <Select value={selectedCategory} onValueChange={setSelectedCategory}>\r\n                                <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Selecione uma categoria (opcional)\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {categories.map(cat => (\r\n                                        <SelectItem key={cat.id} value={cat.id}>{cat.name}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DialogFooter className=\"gap-2\">\r\n                        <Button variant=\"outline\" onClick={() => setPaymentModalOpen(false)}>\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button \r\n                            onClick={handlePayment} \r\n                            disabled={paymentLoading || !paymentAmount}\r\n                            className=\"bg-green-600 hover:bg-green-700\"\r\n                        >\r\n                            {paymentLoading ? 'Processando...' : 'Confirmar Pagamento'}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </MobileLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\credit-cards\\[id]\\purchase\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\credit-cards\\new\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\credit-cards\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\debts\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\export\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\import\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2818,2821],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2818,2821],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport { MobileLayout } from '@/components/layouts/MobileLayout';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Upload, FileSpreadsheet, FileText, CheckCircle, AlertCircle, Loader2 } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype ImportResult = {\r\n  total: number;\r\n  imported: number;\r\n  skipped: number;\r\n};\r\n\r\nexport default function ImportPage() {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [result, setResult] = useState<ImportResult | null>(null);\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n    const file = e.dataTransfer.files[0];\r\n    if (file) handleFileSelect(file);\r\n  };\r\n\r\n  const handleFileSelect = (file: File) => {\r\n    const ext = file.name.split('.').pop()?.toLowerCase();\r\n    if (ext !== 'csv' && ext !== 'ofx') {\r\n      toast.error('Formato inválido. Use arquivos CSV ou OFX.');\r\n      return;\r\n    }\r\n    setSelectedFile(file);\r\n    setResult(null);\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedFile) return;\r\n\r\n    setIsUploading(true);\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      const profileId = localStorage.getItem('profileId');\r\n      \r\n      if (!profileId) {\r\n        toast.error('Perfil não encontrado. Faça login novamente.');\r\n        return;\r\n      }\r\n\r\n      const ext = selectedFile.name.split('.').pop()?.toLowerCase();\r\n      const endpoint = ext === 'ofx' ? 'ofx' : 'csv';\r\n      \r\n      const formData = new FormData();\r\n      formData.append('file', selectedFile);\r\n      formData.append('profileId', profileId);\r\n\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api/v1'}/imports/${endpoint}`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: formData\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Erro na importação');\r\n      }\r\n\r\n      const data: ImportResult = await response.json();\r\n      setResult(data);\r\n      toast.success(`${data.imported} transações importadas com sucesso!`);\r\n    } catch (error: any) {\r\n      console.error('Import failed', error);\r\n      toast.error(error.message || 'Erro ao importar arquivo');\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setSelectedFile(null);\r\n    setResult(null);\r\n  };\r\n\r\n  return (\r\n    <MobileLayout>\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\r\n          <Upload className=\"h-6 w-6\" />\r\n          Importar Dados\r\n        </h1>\r\n        <p className=\"text-muted-foreground text-sm mt-1\">\r\n          Importe transações de arquivos CSV ou OFX\r\n        </p>\r\n      </div>\r\n\r\n      {/* Upload Area */}\r\n      <Card className=\"mb-6\">\r\n        <CardHeader>\r\n          <CardTitle className=\"text-lg\">Selecionar Arquivo</CardTitle>\r\n          <CardDescription>\r\n            Arraste um arquivo ou clique para selecionar\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div\r\n            className={cn(\r\n              \"border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer\",\r\n              isDragging && \"border-primary bg-primary/5\",\r\n              !isDragging && \"border-muted-foreground/25 hover:border-primary/50\"\r\n            )}\r\n            onDragOver={handleDragOver}\r\n            onDragLeave={handleDragLeave}\r\n            onDrop={handleDrop}\r\n            onClick={() => fileInputRef.current?.click()}\r\n          >\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\".csv,.ofx\"\r\n              className=\"hidden\"\r\n              onChange={(e) => e.target.files?.[0] && handleFileSelect(e.target.files[0])}\r\n            />\r\n            \r\n            {selectedFile ? (\r\n              <div className=\"flex flex-col items-center gap-3\">\r\n                {selectedFile.name.endsWith('.csv') ? (\r\n                  <FileSpreadsheet className=\"h-12 w-12 text-green-500\" />\r\n                ) : (\r\n                  <FileText className=\"h-12 w-12 text-blue-500\" />\r\n                )}\r\n                <div>\r\n                  <p className=\"font-medium\">{selectedFile.name}</p>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    {(selectedFile.size / 1024).toFixed(1)} KB\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex flex-col items-center gap-3\">\r\n                <Upload className=\"h-12 w-12 text-muted-foreground\" />\r\n                <div>\r\n                  <p className=\"font-medium\">Arraste seu arquivo aqui</p>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Formatos aceitos: CSV, OFX\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          {selectedFile && !result && (\r\n            <div className=\"flex gap-3 mt-4\">\r\n              <Button \r\n                className=\"flex-1\" \r\n                onClick={handleUpload}\r\n                disabled={isUploading}\r\n              >\r\n                {isUploading ? (\r\n                  <>\r\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                    Importando...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Upload className=\"h-4 w-4 mr-2\" />\r\n                    Importar\r\n                  </>\r\n                )}\r\n              </Button>\r\n              <Button variant=\"outline\" onClick={handleReset} disabled={isUploading}>\r\n                Cancelar\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Result */}\r\n      {result && (\r\n        <Card className=\"border-green-200 bg-green-50\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-start gap-4\">\r\n              <CheckCircle className=\"h-8 w-8 text-green-500 flex-shrink-0\" />\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"font-semibold text-green-800\">Importação Concluída</h3>\r\n                <div className=\"mt-2 space-y-1 text-sm\">\r\n                  <p><span className=\"font-medium\">{result.total}</span> transações encontradas</p>\r\n                  <p className=\"text-green-700\"><span className=\"font-medium\">{result.imported}</span> importadas com sucesso</p>\r\n                  {result.skipped > 0 && (\r\n                    <p className=\"text-orange-600\"><span className=\"font-medium\">{result.skipped}</span> ignoradas (dados inválidos)</p>\r\n                  )}\r\n                </div>\r\n                <Button className=\"mt-4\" variant=\"outline\" onClick={handleReset}>\r\n                  Importar outro arquivo\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Instructions */}\r\n      <Card className=\"mt-6\">\r\n        <CardHeader>\r\n          <CardTitle className=\"text-base flex items-center gap-2\">\r\n            <AlertCircle className=\"h-4 w-4\" />\r\n            Formato do CSV\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"text-sm text-muted-foreground space-y-2\">\r\n          <p>O arquivo CSV deve conter as seguintes colunas:</p>\r\n          <ul className=\"list-disc list-inside space-y-1\">\r\n            <li><strong>Date</strong> ou <strong>Data</strong> - Data da transação</li>\r\n            <li><strong>Description</strong> ou <strong>Descricao</strong> - Descrição</li>\r\n            <li><strong>Amount</strong> ou <strong>Valor</strong> - Valor (negativo = despesa)</li>\r\n            <li><strong>Category</strong> ou <strong>Categoria</strong> (opcional)</li>\r\n            <li><strong>Type</strong> ou <strong>Tipo</strong> (opcional: Income/Expense)</li>\r\n          </ul>\r\n        </CardContent>\r\n      </Card>\r\n    </MobileLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1576,1579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1576,1579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport api from '../../services/api';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { toast } from 'sonner';\r\n\r\nconst loginSchema = z.object({\r\n  email: z.string().email('Email inválido'),\r\n  password: z.string().min(6, 'Senha deve ter no mínimo 6 caracteres'),\r\n});\r\n\r\ntype LoginForm = z.infer<typeof loginSchema>;\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const { login } = useAuth();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm<LoginForm>({\r\n    resolver: zodResolver(loginSchema),\r\n  });\r\n\r\n  const onSubmit = async (data: LoginForm) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await api.post('/auth/login', data);\r\n      const { access_token, user } = response.data;\r\n      \r\n      // Store token\r\n      login(access_token, user.id, user.name, user.avatar, user.defaultProfileId);\r\n      \r\n      toast.success('Login realizado com sucesso!');\r\n      router.push('/dashboard');\r\n    } catch (error: any) {\r\n      console.error(error);\r\n      toast.error('Erro ao realizar login. Verifique suas credenciais.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 px-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"space-y-1\">\r\n          <CardTitle className=\"text-2xl font-bold\">Entrar</CardTitle>\r\n          <CardDescription>\r\n            Digite seu email e senha para acessar sua conta\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\">Email</Label>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"seu@email.com\"\r\n                {...register('email')}\r\n              />\r\n              {errors.email && (\r\n                <p className=\"text-sm text-red-500\">{errors.email.message}</p>\r\n              )}\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"password\">Senha</Label>\r\n              <Input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                {...register('password')}\r\n              />\r\n              {errors.password && (\r\n                <p className=\"text-sm text-red-500\">{errors.password.message}</p>\r\n              )}\r\n            </div>\r\n            <Button className=\"w-full\" type=\"submit\" disabled={isLoading}>\r\n              {isLoading ? 'Entrando...' : 'Entrar'}\r\n            </Button>\r\n          </form>\r\n        </CardContent>\r\n        <CardFooter className=\"flex flex-col gap-2\">\r\n          <div className=\"text-sm text-gray-500 text-center\">\r\n            Não tem uma conta?{' '}\r\n            <Link href=\"/register\" className=\"text-primary hover:underline font-medium\">\r\n              Cadastre-se\r\n            </Link>\r\n          </div>\r\n        </CardFooter>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\more\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\more\\page.tsx:212:5\n  210 |\n  211 |   useEffect(() => {\n> 212 |     setUserEmail(localStorage.getItem('userEmail'));\n      |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  213 |     setUserId(localStorage.getItem('userId'));\n  214 |   }, []);\n  215 |","line":212,"column":5,"nodeType":null,"endLine":212,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { MobileLayout } from '@/components/layouts/MobileLayout';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport {\r\n  Wallet,\r\n  CreditCard,\r\n  PiggyBank,\r\n  Target,\r\n  TrendingUp,\r\n  RefreshCw,\r\n  Calculator,\r\n  Tag,\r\n  Bell,\r\n  Download,\r\n  Upload,\r\n  Database,\r\n  Settings,\r\n  LogOut,\r\n  ChevronRight,\r\n  HelpCircle,\r\n  Star,\r\n  Check,\r\n  Type,\r\n  Pencil,\r\n} from 'lucide-react';\r\nimport { useFont } from '@/hooks/useFont';\r\nimport {\r\n  Drawer,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerTitle,\r\n  DrawerDescription,\r\n  DrawerTrigger,\r\n} from \"@/components/ui/drawer\";\r\nimport { UserAvatar } from '@/components/UserAvatar';\r\nimport { AvatarSelection } from '@/components/auth/AvatarSelection';\r\nimport { userService } from '@/services/userService';\r\nimport { toast } from 'sonner';\r\n\r\ninterface MenuItem {\r\n  icon: React.ElementType;\r\n  label: string;\r\n  description: string;\r\n  href: string;\r\n  gradient: string;\r\n  iconColor: string;\r\n}\r\n\r\nconst financeItems: MenuItem[] = [\r\n  {\r\n    icon: Wallet,\r\n    label: 'Contas Bancárias',\r\n    description: 'Gerenciar suas contas e saldos',\r\n    href: '/accounts',\r\n    gradient: 'from-blue-500 to-blue-600',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: CreditCard,\r\n    label: 'Dívidas',\r\n    description: 'Empréstimos e financiamentos',\r\n    href: '/debts',\r\n    gradient: 'from-red-500 to-rose-600',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: RefreshCw,\r\n    label: 'Recorrentes',\r\n    description: 'Despesas e receitas automáticas',\r\n    href: '/recurring',\r\n    gradient: 'from-purple-500 to-violet-600',\r\n    iconColor: 'text-white',\r\n  },\r\n];\r\n\r\nconst planningItems: MenuItem[] = [\r\n  {\r\n    icon: Target,\r\n    label: 'Orçamentos',\r\n    description: 'Limites mensais por categoria',\r\n    href: '/budgets',\r\n    gradient: 'from-green-500 to-emerald-600',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: PiggyBank,\r\n    label: 'Reservas',\r\n    description: 'Metas de poupança e investimentos',\r\n    href: '/reserves',\r\n    gradient: 'from-pink-500 to-rose-500',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: Calculator,\r\n    label: 'Simulação',\r\n    description: 'Simule compras parceladas',\r\n    href: '/simulation',\r\n    gradient: 'from-orange-500 to-amber-600',\r\n    iconColor: 'text-white',\r\n  },\r\n];\r\n\r\nconst systemItems: MenuItem[] = [\r\n  {\r\n    icon: Tag,\r\n    label: 'Categorias',\r\n    description: 'Organizar suas categorias',\r\n    href: '/categories',\r\n    gradient: 'from-indigo-500 to-blue-600',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: Bell,\r\n    label: 'Notificações',\r\n    description: 'Alertas e lembretes',\r\n    href: '/notifications',\r\n    gradient: 'from-yellow-500 to-orange-500',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: TrendingUp,\r\n    label: 'Movimentações',\r\n    description: 'Histórico completo de transações',\r\n    href: '/transactions',\r\n    gradient: 'from-emerald-500 to-teal-600',\r\n    iconColor: 'text-white',\r\n  },\r\n];\r\n\r\nconst dataItems: MenuItem[] = [\r\n  {\r\n    icon: Download,\r\n    label: 'Importar Dados',\r\n    description: 'Importar extratos e planilhas',\r\n    href: '/import',\r\n    gradient: 'from-cyan-500 to-blue-500',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: Upload,\r\n    label: 'Exportar Dados',\r\n    description: 'Baixe seus dados em CSV',\r\n    href: '/export',\r\n    gradient: 'from-teal-500 to-cyan-600',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: Database,\r\n    label: 'Backup',\r\n    description: 'Backup e restauração',\r\n    href: '/backup',\r\n    gradient: 'from-slate-500 to-gray-600',\r\n    iconColor: 'text-white',\r\n  },\r\n  {\r\n    icon: Settings,\r\n    label: 'Configurações',\r\n    description: 'Preferências do sistema',\r\n    href: '/settings',\r\n    gradient: 'from-gray-500 to-slate-600',\r\n    iconColor: 'text-white',\r\n  },\r\n];\r\n\r\nfunction MenuSection({ title, items }: { title: string; items: MenuItem[] }) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <h2 className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wider px-1\">\r\n        {title}\r\n      </h2>\r\n      <Card className=\"overflow-hidden border-0 shadow-sm\">\r\n        <CardContent className=\"p-0\">\r\n          {items.map((item, index) => (\r\n            <Link\r\n              key={item.href}\r\n              href={item.href}\r\n              className={`flex items-center gap-4 p-4 hover:bg-muted/50 active:bg-muted transition-all duration-200 ${\r\n                index !== items.length - 1 ? 'border-b border-border/50' : ''\r\n              }`}\r\n            >\r\n              <div className={`p-2.5 rounded-xl bg-linear-to-br ${item.gradient} shadow-lg shadow-${item.gradient.split('-')[1]}/20`}>\r\n                <item.icon className={`h-5 w-5 ${item.iconColor}`} />\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"font-medium text-sm text-foreground\">{item.label}</p>\r\n                <p className=\"text-xs text-muted-foreground mt-0.5 truncate\">\r\n                  {item.description}\r\n                </p>\r\n              </div>\r\n              <ChevronRight className=\"h-4 w-4 text-muted-foreground/50\" />\r\n            </Link>\r\n          ))}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function MorePage() {\r\n  const { logout, userName, userAvatar, updateUser } = useAuth();\r\n  const { font, setFont } = useFont(); \r\n  const [userEmail, setUserEmail] = useState<string | null>(null);\r\n  const [isAvatarDrawerOpen, setIsAvatarDrawerOpen] = useState(false);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    setUserEmail(localStorage.getItem('userEmail'));\r\n    setUserId(localStorage.getItem('userId'));\r\n  }, []);\r\n\r\n  const handleAvatarUpdate = async (newAvatar: string) => {\r\n    if (!userId) return;\r\n    \r\n    try {\r\n      await userService.update(userId, { avatar: newAvatar });\r\n      updateUser(userName || '', newAvatar);\r\n      setIsAvatarDrawerOpen(false);\r\n      toast.success('Avatar atualizado com sucesso!');\r\n    } catch (error) {\r\n      console.error(error);\r\n      toast.error('Erro ao atualizar avatar');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MobileLayout>\r\n      <div className=\"space-y-6\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h1 className=\"text-2xl font-bold tracking-tight flex items-center gap-2\">\r\n            <Settings className=\"h-6 w-6\" />\r\n            Mais Opções\r\n          </h1>\r\n        </div>\r\n\r\n        {/* User Profile Card */}\r\n        <Card className=\"overflow-hidden border-0 shadow-lg\">\r\n          <div className=\"bg-linear-to-br from-primary via-primary to-primary/80 p-5\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"relative\">\r\n                <div className=\"ring-2 ring-white/30 rounded-full\">\r\n                  <UserAvatar \r\n                    name={userName} \r\n                    avatar={userAvatar} \r\n                    size=\"lg\" \r\n                    className=\"border-2 border-white/20\"\r\n                  />\r\n                </div>\r\n                <Drawer open={isAvatarDrawerOpen} onOpenChange={setIsAvatarDrawerOpen}>\r\n                  <DrawerTrigger asChild>\r\n                    <Button \r\n                      variant=\"secondary\" \r\n                      size=\"icon\" \r\n                      className=\"absolute -bottom-1 -right-1 h-6 w-6 rounded-full shadow-md hover:scale-105 transition-transform\"\r\n                    >\r\n                      <Pencil className=\"h-3 w-3\" />\r\n                    </Button>\r\n                  </DrawerTrigger>\r\n                  <DrawerContent>\r\n                    <DrawerHeader>\r\n                      <DrawerTitle>Alterar Avatar</DrawerTitle>\r\n                      <DrawerDescription>Escolha um novo estilo para o seu perfil</DrawerDescription>\r\n                    </DrawerHeader>\r\n                    <div className=\"p-4 overflow-y-auto max-h-[60vh] custom-scrollbar\">\r\n                      <AvatarSelection \r\n                        selectedAvatar={userAvatar} \r\n                        onSelect={handleAvatarUpdate} \r\n                        userName={userName || 'User'} \r\n                      />\r\n                    </div>\r\n                  </DrawerContent>\r\n                </Drawer>\r\n              </div>\r\n              \r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"font-semibold text-white text-lg truncate\">\r\n                  {userName || 'Usuário'}\r\n                </p>\r\n                <p className=\"text-sm text-white/70 truncate\">{userEmail || ''}</p>\r\n              </div>\r\n              <Link href=\"/settings\">\r\n                <Button \r\n                  variant=\"ghost\" \r\n                  size=\"icon\" \r\n                  className=\"text-white/70 hover:text-white hover:bg-white/20\"\r\n                >\r\n                  <Settings className=\"h-5 w-5\" />\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Quick Stats or Actions */}\r\n          <div className=\"grid grid-cols-3 divide-x divide-border/50 bg-muted/30\">\r\n            <Link href=\"/transactions\" className=\"p-3 text-center hover:bg-muted/50 transition-colors\">\r\n              <TrendingUp className=\"h-4 w-4 mx-auto text-muted-foreground mb-1\" />\r\n              <span className=\"text-xs text-muted-foreground\">Transações</span>\r\n            </Link>\r\n            <Link href=\"/credit-cards\" className=\"p-3 text-center hover:bg-muted/50 transition-colors\">\r\n              <CreditCard className=\"h-4 w-4 mx-auto text-muted-foreground mb-1\" />\r\n              <span className=\"text-xs text-muted-foreground\">Cartões</span>\r\n            </Link>\r\n            <Link href=\"/budgets\" className=\"p-3 text-center hover:bg-muted/50 transition-colors\">\r\n              <Target className=\"h-4 w-4 mx-auto text-muted-foreground mb-1\" />\r\n              <span className=\"text-xs text-muted-foreground\">Orçamentos</span>\r\n            </Link>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Appearance Section */}\r\n        <div className=\"space-y-3\">\r\n          <h2 className=\"text-sm font-semibold text-muted-foreground uppercase tracking-wider px-1\">\r\n            Aparência\r\n          </h2>\r\n          <Card className=\"overflow-hidden border-0 shadow-sm\">\r\n            <CardContent className=\"p-0\">\r\n              <div className=\"p-4 bg-muted/20 border-b border-border/50\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <div className=\"p-2 rounded-lg bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400\">\r\n                    <Type className=\"h-5 w-5\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-medium\">Estilo da Fonte</h3>\r\n                    <p className=\"text-xs text-muted-foreground\">Escolha a tipografia do sistema</p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <button\r\n                    onClick={() => setFont('geist')}\r\n                    className={`relative p-3 rounded-xl border-2 transition-all duration-200 text-left ${\r\n                      font === 'geist'\r\n                        ? 'border-blue-600 bg-blue-50/50 dark:bg-blue-900/20'\r\n                        : 'border-transparent bg-background hover:bg-muted'\r\n                    }`}\r\n                  >\r\n                    <div className=\"font-sans text-sm font-medium mb-1\">Geist (Padrão)</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Moderna e limpa</div>\r\n                    {font === 'geist' && (\r\n                      <div className=\"absolute top-2 right-2 p-1 rounded-full bg-blue-600 text-white\">\r\n                        <Check className=\"h-3 w-3\" />\r\n                      </div>\r\n                    )}\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={() => setFont('jakarta')}\r\n                    className={`relative p-3 rounded-xl border-2 transition-all duration-200 text-left ${\r\n                      font === 'jakarta'\r\n                        ? 'border-blue-600 bg-blue-50/50 dark:bg-blue-900/20'\r\n                        : 'border-transparent bg-background hover:bg-muted'\r\n                    }`}\r\n                    style={{ fontFamily: 'var(--font-jakarta)' }}\r\n                  >\r\n                    <div className=\"text-sm font-medium mb-1\">Jakarta Sans</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Geométrica</div>\r\n                    {font === 'jakarta' && (\r\n                      <div className=\"absolute top-2 right-2 p-1 rounded-full bg-blue-600 text-white\">\r\n                        <Check className=\"h-3 w-3\" />\r\n                      </div>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Menu Sections */}\r\n        <MenuSection title=\"💰 Finanças\" items={financeItems} />\r\n        <MenuSection title=\"📊 Planejamento\" items={planningItems} />\r\n        <MenuSection title=\"⚙️ Sistema\" items={systemItems} />\r\n        <MenuSection title=\"📁 Dados\" items={dataItems} />\r\n\r\n        {/* Help & Support Section */}\r\n        <Card className=\"overflow-hidden border-0 shadow-sm\">\r\n          <CardContent className=\"p-0\">\r\n            <Link\r\n              href=\"/settings\"\r\n              className=\"flex items-center gap-4 p-4 hover:bg-muted/50 transition-colors border-b border-border/50\"\r\n            >\r\n              <div className=\"p-2.5 rounded-xl bg-linear-to-br from-blue-400 to-indigo-500 shadow-lg\">\r\n                <HelpCircle className=\"h-5 w-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"font-medium text-sm\">Ajuda & Suporte</p>\r\n                <p className=\"text-xs text-muted-foreground\">Dúvidas frequentes</p>\r\n              </div>\r\n              <ChevronRight className=\"h-4 w-4 text-muted-foreground/50\" />\r\n            </Link>\r\n            <Link\r\n              href=\"/settings\"\r\n              className=\"flex items-center gap-4 p-4 hover:bg-muted/50 transition-colors\"\r\n            >\r\n              <div className=\"p-2.5 rounded-xl bg-linear-to-br from-amber-400 to-orange-500 shadow-lg\">\r\n                <Star className=\"h-5 w-5 text-white\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"font-medium text-sm\">Avaliar o App</p>\r\n                <p className=\"text-xs text-muted-foreground\">Deixe sua opinião</p>\r\n              </div>\r\n              <ChevronRight className=\"h-4 w-4 text-muted-foreground/50\" />\r\n            </Link>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Logout Button */}\r\n        <Card className=\"overflow-hidden border-0 shadow-sm\">\r\n          <CardContent className=\"p-0\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              className=\"w-full justify-start gap-4 p-4 h-auto text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-none\"\r\n              onClick={logout}\r\n            >\r\n              <div className=\"p-2.5 rounded-xl bg-linear-to-br from-red-500 to-rose-600 shadow-lg\">\r\n                <LogOut className=\"h-5 w-5 text-white\" />\r\n              </div>\r\n              <div className=\"text-left\">\r\n                <p className=\"font-medium text-sm\">Sair do Sistema</p>\r\n                <p className=\"text-xs text-red-400\">Encerrar sessão atual</p>\r\n              </div>\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Version Info */}\r\n        <div className=\"text-center py-4\">\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            Sistema Financeiro Pessoal\r\n          </p>\r\n          <p className=\"text-xs text-muted-foreground/60\">\r\n            Versão 1.0.0\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </MobileLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\notifications\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchNotifications'. Either include it or remove the dependency array.","line":51,"column":6,"nodeType":"ArrayExpression","endLine":51,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchNotifications, filter]","fix":{"range":[2078,2086],"text":"[fetchNotifications, filter]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { MobileLayout } from '@/components/layouts/MobileLayout';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { Bell, BellOff, CheckCheck, AlertCircle, Wallet, PiggyBank, Info, Plus, Trash2, Pencil } from 'lucide-react';\r\nimport { notificationsService, Notification, CreateNotificationDto, UpdateNotificationDto } from '@/services/notificationsService';\r\nimport { NotificationForm } from '@/components/notifications/NotificationForm';\r\nimport { toast } from 'sonner';\r\nimport { formatDistanceToNow, parseISO } from 'date-fns';\r\nimport { ptBR } from 'date-fns/locale';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\n\r\nexport default function NotificationsPage() {\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState<'all' | 'unread'>('all');\r\n  const [formOpen, setFormOpen] = useState(false);\r\n  const [editingNotification, setEditingNotification] = useState<Notification | null>(null);\r\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\r\n  const [deletingId, setDeletingId] = useState<string | null>(null);\r\n\r\n  const profileId = typeof window !== 'undefined' ? localStorage.getItem('profileId') || '' : '';\r\n\r\n  const fetchNotifications = async () => {\r\n    try {\r\n      const data = await notificationsService.getAll(filter === 'unread' ? false : undefined);\r\n      setNotifications(data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch notifications', error);\r\n      toast.error('Erro ao carregar notificações');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchNotifications();\r\n  }, [filter]);\r\n\r\n  const handleMarkAsRead = async (id: string) => {\r\n    try {\r\n      await notificationsService.markAsRead(id);\r\n      setNotifications(prev => \r\n        prev.map(n => n.id === id ? { ...n, read: true } : n)\r\n      );\r\n      toast.success('Marcada como lida');\r\n    } catch (error) {\r\n      console.error('Failed to mark as read', error);\r\n      toast.error('Erro ao marcar como lida');\r\n    }\r\n  };\r\n\r\n  const handleMarkAllAsRead = async () => {\r\n    try {\r\n      await notificationsService.markAllAsRead();\r\n      setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n      toast.success('Todas marcadas como lidas');\r\n    } catch (error) {\r\n      console.error('Failed to mark all as read', error);\r\n      toast.error('Erro ao marcar todas como lidas');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async (data: CreateNotificationDto | UpdateNotificationDto) => {\r\n    try {\r\n      const newNotification = await notificationsService.create(data as CreateNotificationDto);\r\n      setNotifications(prev => [newNotification, ...prev]);\r\n      toast.success('Notificação criada!');\r\n    } catch (error) {\r\n      console.error('Failed to create notification', error);\r\n      toast.error('Erro ao criar notificação');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async (data: CreateNotificationDto | UpdateNotificationDto) => {\r\n    if (!editingNotification) return;\r\n    try {\r\n      const updated = await notificationsService.update(editingNotification.id, data as UpdateNotificationDto);\r\n      setNotifications(prev => prev.map(n => n.id === editingNotification.id ? updated : n));\r\n      setEditingNotification(null);\r\n      toast.success('Notificação atualizada!');\r\n    } catch (error) {\r\n      console.error('Failed to update notification', error);\r\n      toast.error('Erro ao atualizar notificação');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!deletingId) return;\r\n    try {\r\n      await notificationsService.delete(deletingId);\r\n      setNotifications(prev => prev.filter(n => n.id !== deletingId));\r\n      toast.success('Notificação excluída!');\r\n    } catch (error) {\r\n      console.error('Failed to delete notification', error);\r\n      toast.error('Erro ao excluir notificação');\r\n    } finally {\r\n      setDeleteConfirmOpen(false);\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const getNotificationIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'BUDGET_ALERT':\r\n        return <AlertCircle className=\"h-5 w-5 text-orange-500\" />;\r\n      case 'DEBT_DUE':\r\n        return <Wallet className=\"h-5 w-5 text-red-500\" />;\r\n      case 'RESERVE_GOAL':\r\n        return <PiggyBank className=\"h-5 w-5 text-green-500\" />;\r\n      default:\r\n        return <Info className=\"h-5 w-5 text-blue-500\" />;\r\n    }\r\n  };\r\n\r\n  const getNotificationColor = (type: string) => {\r\n    switch (type) {\r\n      case 'BUDGET_ALERT':\r\n        return 'border-l-orange-500';\r\n      case 'DEBT_DUE':\r\n        return 'border-l-red-500';\r\n      case 'RESERVE_GOAL':\r\n        return 'border-l-green-500';\r\n      default:\r\n        return 'border-l-blue-500';\r\n    }\r\n  };\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n  return (\r\n    <MobileLayout>\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h1 className=\"text-2xl font-bold tracking-tight flex items-center gap-2\">\r\n            <Bell className=\"h-6 w-6\" />\r\n            Notificações\r\n            {unreadCount > 0 && (\r\n              <span className=\"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full\">\r\n                {unreadCount}\r\n              </span>\r\n            )}\r\n          </h1>\r\n          <div className=\"flex gap-2\">\r\n            <Button size=\"sm\" onClick={() => setFormOpen(true)}>\r\n              <Plus className=\"h-4 w-4 mr-1\" />\r\n              Novo\r\n            </Button>\r\n            {unreadCount > 0 && (\r\n              <Button variant=\"outline\" size=\"sm\" onClick={handleMarkAllAsRead}>\r\n                <CheckCheck className=\"h-4 w-4 mr-1\" />\r\n                Ler todas\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filter Tabs */}\r\n        <div className=\"flex gap-2 bg-muted p-1 rounded-lg\">\r\n          <Button\r\n            variant={filter === 'all' ? 'default' : 'ghost'}\r\n            size=\"sm\"\r\n            className=\"flex-1\"\r\n            onClick={() => setFilter('all')}\r\n          >\r\n            Todas\r\n          </Button>\r\n          <Button\r\n            variant={filter === 'unread' ? 'default' : 'ghost'}\r\n            size=\"sm\"\r\n            className=\"flex-1\"\r\n            onClick={() => setFilter('unread')}\r\n          >\r\n            Não lidas\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Notifications List */}\r\n      <div className=\"space-y-3\">\r\n        {loading ? (\r\n          <>\r\n            <Skeleton className=\"h-24 w-full rounded-xl\" />\r\n            <Skeleton className=\"h-24 w-full rounded-xl\" />\r\n            <Skeleton className=\"h-24 w-full rounded-xl\" />\r\n          </>\r\n        ) : notifications.length === 0 ? (\r\n          <Card>\r\n            <CardContent className=\"p-8 text-center\">\r\n              <BellOff className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n              <h3 className=\"font-semibold mb-2\">Nenhuma notificação</h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                {filter === 'unread' \r\n                  ? 'Você não tem notificações não lidas.' \r\n                  : 'Você não tem notificações ainda.'}\r\n              </p>\r\n              <Button onClick={() => setFormOpen(true)}>\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Criar lembrete\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        ) : (\r\n          notifications.map((notification) => (\r\n            <Card\r\n              key={notification.id}\r\n              className={cn(\r\n                \"border-l-4 transition-all\",\r\n                getNotificationColor(notification.type),\r\n                !notification.read && \"bg-primary/5\",\r\n                notification.read && \"opacity-75\"\r\n              )}\r\n            >\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex gap-3\">\r\n                  {/* Icon */}\r\n                  <div className=\"flex flex-col items-center gap-1\">\r\n                    {!notification.read && (\r\n                      <div className=\"w-2.5 h-2.5 rounded-full bg-blue-500 animate-pulse\" />\r\n                    )}\r\n                    <div className=\"mt-1\">\r\n                      {getNotificationIcon(notification.type)}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between gap-2\">\r\n                      <h3 className={cn(\r\n                        \"font-medium\",\r\n                        !notification.read && \"font-semibold\"\r\n                      )}>\r\n                        {notification.title}\r\n                      </h3>\r\n                      <div className=\"flex gap-1\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-7 w-7\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setEditingNotification(notification);\r\n                          }}\r\n                        >\r\n                          <Pencil className=\"h-3.5 w-3.5\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-7 w-7 text-red-500 hover:text-red-600\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setDeletingId(notification.id);\r\n                            setDeleteConfirmOpen(true);\r\n                          }}\r\n                        >\r\n                          <Trash2 className=\"h-3.5 w-3.5\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"text-sm text-muted-foreground mt-1\">\r\n                      {notification.message}\r\n                    </p>\r\n                    <div className=\"flex items-center justify-between mt-2\">\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        {formatDistanceToNow(parseISO(notification.createdAt), {\r\n                          addSuffix: true,\r\n                          locale: ptBR\r\n                        })}\r\n                      </p>\r\n                      {!notification.read && (\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          className=\"h-6 text-xs\"\r\n                          onClick={() => handleMarkAsRead(notification.id)}\r\n                        >\r\n                          Marcar como lida\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Create/Edit Form */}\r\n      <NotificationForm\r\n        open={formOpen || !!editingNotification}\r\n        onOpenChange={(open) => {\r\n          if (!open) {\r\n            setFormOpen(false);\r\n            setEditingNotification(null);\r\n          }\r\n        }}\r\n        notification={editingNotification}\r\n        profileId={profileId}\r\n        onSubmit={editingNotification ? handleUpdate : handleCreate}\r\n      />\r\n\r\n      {/* Delete Confirmation */}\r\n      <AlertDialog open={deleteConfirmOpen} onOpenChange={setDeleteConfirmOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Excluir Notificação</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Tem certeza que deseja excluir esta notificação? Esta ação não pode ser desfeita.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancelar</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleDelete}>\r\n              Excluir\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </MobileLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\recurring\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":84,"column":6,"nodeType":"ArrayExpression","endLine":84,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData]","fix":{"range":[2363,2365],"text":"[fetchData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { MobileLayout } from '@/components/layouts/MobileLayout';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Input } from '@/components/ui/input';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { toast } from 'sonner';\r\nimport { \r\n  Plus, \r\n  RefreshCw, \r\n  Calendar,\r\n  Repeat,\r\n  Trash2,\r\n  Edit,\r\n  Pause,\r\n  Play,\r\n  ArrowUpCircle,\r\n  ArrowDownCircle\r\n} from 'lucide-react';\r\nimport { format, parseISO } from 'date-fns';\r\nimport { ptBR } from 'date-fns/locale';\r\nimport { \r\n  recurringTransactionsService, \r\n  RecurringTransaction,\r\n  CreateRecurringTransactionDto \r\n} from '@/services/recurringTransactionsService';\r\nimport { categoriesService } from '@/services/categoriesService';\r\nimport { profileService } from '@/services/profileService';\r\n\r\ninterface Category {\r\n  id: string;\r\n  name: string;\r\n  color?: string;\r\n}\r\n\r\ninterface Profile {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\nexport default function RecurringTransactionsPage() {\r\n  const [transactions, setTransactions] = useState<RecurringTransaction[]>([]);\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [profiles, setProfiles] = useState<Profile[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingTransaction, setEditingTransaction] = useState<RecurringTransaction | null>(null);\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState<CreateRecurringTransactionDto>({\r\n    description: '',\r\n    amount: 0,\r\n    type: 'expense',\r\n    frequency: 'MONTHLY',\r\n    startDate: new Date().toISOString().split('T')[0],\r\n    categoryId: '',\r\n    profileId: '',\r\n    skipPastRuns: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [transactionsData, categoriesData, profilesData] = await Promise.all([\r\n        recurringTransactionsService.getAll(),\r\n        categoriesService.getAll(),\r\n        profileService.getAll(),\r\n      ]);\r\n      setTransactions(transactionsData);\r\n      setCategories(categoriesData);\r\n      setProfiles(profilesData);\r\n      \r\n      // Set default profile if available\r\n      if (profilesData.length > 0 && !formData.profileId) {\r\n        setFormData(prev => ({ ...prev, profileId: profilesData[0].id }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n      toast.error('Erro ao carregar dados');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.description || !formData.amount || !formData.categoryId || !formData.profileId) {\r\n      toast.error('Preencha todos os campos obrigatórios');\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      if (editingTransaction) {\r\n        await recurringTransactionsService.update(editingTransaction.id, formData);\r\n        toast.success('Transação atualizada com sucesso!');\r\n      } else {\r\n        await recurringTransactionsService.create(formData);\r\n        toast.success('Transação recorrente criada!');\r\n      }\r\n      setIsDialogOpen(false);\r\n      resetForm();\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Error saving:', error);\r\n      toast.error('Erro ao salvar transação');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (transaction: RecurringTransaction) => {\r\n    setEditingTransaction(transaction);\r\n    setFormData({\r\n      description: transaction.description,\r\n      amount: Number(transaction.amount),\r\n      type: transaction.type,\r\n      frequency: transaction.frequency,\r\n      startDate: transaction.startDate.split('T')[0],\r\n      endDate: transaction.endDate?.split('T')[0],\r\n      categoryId: transaction.category?.id || '',\r\n      profileId: transaction.profile?.id || '',\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Tem certeza que deseja excluir esta transação recorrente?')) return;\r\n    \r\n    try {\r\n      await recurringTransactionsService.delete(id);\r\n      toast.success('Transação excluída');\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Error deleting:', error);\r\n      toast.error('Erro ao excluir');\r\n    }\r\n  };\r\n\r\n  const handleToggleActive = async (transaction: RecurringTransaction) => {\r\n    try {\r\n      await recurringTransactionsService.toggleActive(transaction.id, !transaction.active);\r\n      toast.success(transaction.active ? 'Transação pausada' : 'Transação reativada');\r\n      fetchData();\r\n    } catch (error) {\r\n      console.error('Error toggling:', error);\r\n      toast.error('Erro ao atualizar');\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setEditingTransaction(null);\r\n    setFormData({\r\n      description: '',\r\n      amount: 0,\r\n      type: 'expense',\r\n      frequency: 'MONTHLY',\r\n      startDate: new Date().toISOString().split('T')[0],\r\n      categoryId: '',\r\n      profileId: profiles[0]?.id || '',\r\n      skipPastRuns: false,\r\n    });\r\n  };\r\n\r\n  const openCreateDialog = () => {\r\n    resetForm();\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const formatCurrency = (value: number) => {\r\n    return new Intl.NumberFormat('pt-BR', {\r\n      style: 'currency',\r\n      currency: 'BRL',\r\n    }).format(value);\r\n  };\r\n\r\n  const getFrequencyLabel = (frequency: string) => {\r\n    const labels: Record<string, string> = {\r\n      MONTHLY: 'Mensal',\r\n      WEEKLY: 'Semanal',\r\n      YEARLY: 'Anual',\r\n    };\r\n    return labels[frequency] || frequency;\r\n  };\r\n\r\n  const formatDate = (dateStr: string) => {\r\n    try {\r\n      return format(parseISO(dateStr), 'dd/MM/yyyy', { locale: ptBR });\r\n    } catch {\r\n      return dateStr;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MobileLayout>\r\n      <div className=\"space-y-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h1 className=\"text-2xl font-bold tracking-tight flex items-center gap-2\">\r\n            <Repeat className=\"h-6 w-6\" />\r\n            Recorrentes\r\n          </h1>\r\n          <Button onClick={openCreateDialog}>\r\n            <Plus className=\"h-4 w-4 mr-2\" />\r\n            Novo\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Summary Cards */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <Card className=\"bg-green-50 border-green-200\">\r\n            <CardContent className=\"p-4\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <ArrowUpCircle className=\"h-5 w-5 text-green-600\" />\r\n                <div>\r\n                  <p className=\"text-xs text-green-600 font-medium\">Receitas</p>\r\n                  <p className=\"text-lg font-bold text-green-700\">\r\n                    {formatCurrency(\r\n                      transactions\r\n                        .filter(t => t.type === 'income' && t.active)\r\n                        .reduce((sum, t) => sum + Number(t.amount), 0)\r\n                    )}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n          <Card className=\"bg-red-50 border-red-200\">\r\n            <CardContent className=\"p-4\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <ArrowDownCircle className=\"h-5 w-5 text-red-600\" />\r\n                <div>\r\n                  <p className=\"text-xs text-red-600 font-medium\">Despesas</p>\r\n                  <p className=\"text-lg font-bold text-red-700\">\r\n                    {formatCurrency(\r\n                      transactions\r\n                        .filter(t => t.type === 'expense' && t.active)\r\n                        .reduce((sum, t) => sum + Number(t.amount), 0)\r\n                    )}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Transactions List */}\r\n        <Card>\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-base flex items-center gap-2\">\r\n              <RefreshCw className=\"h-4 w-4\" />\r\n              Suas Recorrências ({transactions.length})\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-3\">\r\n            {loading ? (\r\n              <>\r\n                <Skeleton className=\"h-20 w-full\" />\r\n                <Skeleton className=\"h-20 w-full\" />\r\n                <Skeleton className=\"h-20 w-full\" />\r\n              </>\r\n            ) : transactions.length === 0 ? (\r\n              <div className=\"text-center py-8 text-muted-foreground\">\r\n                <RefreshCw className=\"h-12 w-12 mx-auto mb-4 opacity-20\" />\r\n                <p>Nenhuma transação recorrente cadastrada.</p>\r\n                <p className=\"text-sm\">Clique em &quot;Nova&quot; para começar.</p>\r\n              </div>\r\n            ) : (\r\n              transactions.map((transaction) => (\r\n                <div\r\n                  key={transaction.id}\r\n                  className={`p-4 rounded-lg border ${\r\n                    !transaction.active ? 'opacity-50 bg-muted' : 'bg-card'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <span className=\"font-medium\">{transaction.description}</span>\r\n                        {!transaction.active && (\r\n                          <Badge variant=\"secondary\" className=\"text-xs\">Pausada</Badge>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex flex-wrap items-center gap-2 text-sm text-muted-foreground\">\r\n                        <Badge variant={transaction.type === 'income' ? 'default' : 'destructive'}>\r\n                          {transaction.type === 'income' ? 'Receita' : 'Despesa'}\r\n                        </Badge>\r\n                        <Badge variant=\"outline\">{getFrequencyLabel(transaction.frequency)}</Badge>\r\n                        {transaction.category && (\r\n                          <span className=\"text-xs bg-secondary px-2 py-0.5 rounded\">\r\n                            {transaction.category.name}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex items-center gap-4 mt-2 text-xs text-muted-foreground\">\r\n                        <span className=\"flex items-center gap-1\">\r\n                          <Calendar className=\"h-3 w-3\" />\r\n                          Próxima: {formatDate(transaction.nextRun)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className={`text-lg font-bold ${\r\n                        transaction.type === 'income' ? 'text-green-600' : 'text-red-600'\r\n                      }`}>\r\n                        {transaction.type === 'income' ? '+' : '-'}\r\n                        {formatCurrency(Number(transaction.amount))}\r\n                      </p>\r\n                      <div className=\"flex items-center gap-1 mt-2\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-8 w-8\"\r\n                          onClick={() => handleToggleActive(transaction)}\r\n                        >\r\n                          {transaction.active ? (\r\n                            <Pause className=\"h-4 w-4\" />\r\n                          ) : (\r\n                            <Play className=\"h-4 w-4\" />\r\n                          )}\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-8 w-8\"\r\n                          onClick={() => handleEdit(transaction)}\r\n                        >\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-8 w-8 text-destructive hover:text-destructive\"\r\n                          onClick={() => handleDelete(transaction.id)}\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Create/Edit Dialog */}\r\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n        <DialogContent className=\"max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle>\r\n              {editingTransaction ? 'Editar Transação' : 'Nova Transação Recorrente'}\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              {editingTransaction \r\n                ? 'Atualize os dados da transação recorrente.'\r\n                : 'Configure uma transação que será lançada automaticamente.'}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"description\">Descrição *</Label>\r\n              <Input\r\n                id=\"description\"\r\n                placeholder=\"Ex: Aluguel, Salário\"\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"amount\">Valor *</Label>\r\n                <Input\r\n                  id=\"amount\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"0,00\"\r\n                  value={formData.amount || ''}\r\n                  onChange={(e) => setFormData({ ...formData, amount: parseFloat(e.target.value) || 0 })}\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"type\">Tipo *</Label>\r\n                <Select\r\n                  value={formData.type}\r\n                  onValueChange={(value: 'income' | 'expense') => setFormData({ ...formData, type: value })}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Selecione\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"income\">Receita</SelectItem>\r\n                    <SelectItem value=\"expense\">Despesa</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"frequency\">Frequência *</Label>\r\n              <Select\r\n                value={formData.frequency}\r\n                onValueChange={(value: 'MONTHLY' | 'WEEKLY' | 'YEARLY') => setFormData({ ...formData, frequency: value })}\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecione\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"WEEKLY\">Semanal</SelectItem>\r\n                  <SelectItem value=\"MONTHLY\">Mensal</SelectItem>\r\n                  <SelectItem value=\"YEARLY\">Anual</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"startDate\">Data Início *</Label>\r\n                <Input\r\n                  id=\"startDate\"\r\n                  type=\"date\"\r\n                  value={formData.startDate}\r\n                  onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"endDate\">Data Fim (opcional)</Label>\r\n                <Input\r\n                  id=\"endDate\"\r\n                  type=\"date\"\r\n                  value={formData.endDate || ''}\r\n                  onChange={(e) => setFormData({ ...formData, endDate: e.target.value || undefined })}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-3 bg-muted/50 p-3 rounded-lg\">\r\n              <Switch\r\n                id=\"skipPastRuns\"\r\n                checked={formData.skipPastRuns || false}\r\n                onCheckedChange={(checked) => setFormData({ ...formData, skipPastRuns: checked })}\r\n              />\r\n              <div>\r\n                <Label htmlFor=\"skipPastRuns\" className=\"cursor-pointer\">\r\n                  Conta já existe (não gerar retroativos)\r\n                </Label>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Marque se esta recorrência já existia antes de hoje\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"category\">Categoria *</Label>\r\n              <Select\r\n                value={formData.categoryId}\r\n                onValueChange={(value) => setFormData({ ...formData, categoryId: value })}\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecione a categoria\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {categories.map((cat) => (\r\n                    <SelectItem key={cat.id} value={cat.id}>\r\n                      {cat.name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"profile\">Perfil *</Label>\r\n              <Select\r\n                value={formData.profileId}\r\n                onValueChange={(value) => setFormData({ ...formData, profileId: value })}\r\n              >\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Selecione o perfil\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  {profiles.map((profile) => (\r\n                    <SelectItem key={profile.id} value={profile.id}>\r\n                      {profile.name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>\r\n              Cancelar\r\n            </Button>\r\n            <Button onClick={handleSubmit} disabled={submitting}>\r\n              {submitting ? 'Salvando...' : editingTransaction ? 'Salvar' : 'Criar'}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </MobileLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\register\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2298,2301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2298,2301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport api from '../../services/api';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { toast } from 'sonner';\r\nimport { AvatarSelection } from '@/components/auth/AvatarSelection';\r\nimport { UserAvatar } from '@/components/UserAvatar';\r\n\r\nconst registerSchema = z.object({\r\n  name: z.string().min(3, 'Nome deve ter no mínimo 3 caracteres'),\r\n  email: z.string().email('Email inválido'),\r\n  password: z.string().min(6, 'Senha deve ter no mínimo 6 caracteres'),\r\n  confirmPassword: z.string(),\r\n  avatar: z.string().optional(),\r\n}).refine((data) => data.password === data.confirmPassword, {\r\n  message: \"Senhas não conferem\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype RegisterForm = z.infer<typeof registerSchema>;\r\n\r\nexport default function RegisterPage() {\r\n  const router = useRouter();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [step, setStep] = useState<'details' | 'avatar'>('details');\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setValue,\r\n    watch,\r\n    trigger,\r\n    formState: { errors },\r\n  } = useForm<RegisterForm>({\r\n    resolver: zodResolver(registerSchema),\r\n    defaultValues: {\r\n      avatar: '',\r\n    }\r\n  });\r\n\r\n  const selectedAvatar = watch('avatar');\r\n  const userName = watch('name');\r\n\r\n  const onNextStep = async () => {\r\n    const isValid = await trigger(['name', 'email', 'password', 'confirmPassword']);\r\n    if (isValid) {\r\n      setStep('avatar');\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data: RegisterForm) => {\r\n    setIsLoading(true);\r\n    try {\r\n      await api.post('/users', {\r\n        name: data.name,\r\n        email: data.email,\r\n        password: data.password,\r\n        avatar: data.avatar || undefined,\r\n      });\r\n      \r\n      toast.success('Conta criada com sucesso! Faça login para continuar.');\r\n      router.push('/login');\r\n    } catch (error: any) {\r\n      console.error(error);\r\n      if (error.response?.status === 409) {\r\n          toast.error('Este email já está em uso.');\r\n      } else {\r\n          toast.error('Erro ao criar conta. Tente novamente.');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 px-4 py-8\">\r\n      <Card className=\"w-full max-w-lg\">\r\n        <CardHeader className=\"space-y-1\">\r\n          <CardTitle className=\"text-2xl font-bold\">\r\n            {step === 'details' ? 'Criar Conta' : 'Escolha seu Avatar'}\r\n          </CardTitle>\r\n          <CardDescription>\r\n            {step === 'details' \r\n              ? 'Insira seus dados para começar a usar o sistema'\r\n              : 'Personalize sua experiência com um avatar (opcional)'\r\n            }\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n            {step === 'details' ? (\r\n              <>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"name\">Nome Completo</Label>\r\n                  <Input\r\n                    id=\"name\"\r\n                    placeholder=\"Ex: João Silva\"\r\n                    {...register('name')}\r\n                  />\r\n                  {errors.name && (\r\n                    <p className=\"text-sm text-red-500\">{errors.name.message}</p>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"email\">Email</Label>\r\n                  <Input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    placeholder=\"seu@email.com\"\r\n                    {...register('email')}\r\n                  />\r\n                  {errors.email && (\r\n                    <p className=\"text-sm text-red-500\">{errors.email.message}</p>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"password\">Senha</Label>\r\n                  <Input\r\n                    id=\"password\"\r\n                    type=\"password\"\r\n                    {...register('password')}\r\n                  />\r\n                  {errors.password && (\r\n                    <p className=\"text-sm text-red-500\">{errors.password.message}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"confirmPassword\">Confirmar Senha</Label>\r\n                  <Input\r\n                    id=\"confirmPassword\"\r\n                    type=\"password\"\r\n                    {...register('confirmPassword')}\r\n                  />\r\n                  {errors.confirmPassword && (\r\n                    <p className=\"text-sm text-red-500\">{errors.confirmPassword.message}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <Button className=\"w-full\" type=\"button\" onClick={onNextStep}>\r\n                  Continuar\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"flex justify-center mb-6\">\r\n                  <UserAvatar \r\n                    name={userName} \r\n                    avatar={selectedAvatar} \r\n                    size=\"xl\" \r\n                    className=\"h-32 w-32 border-4 border-primary/10\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"max-h-[400px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                   <AvatarSelection \r\n                    selectedAvatar={selectedAvatar || null} \r\n                    onSelect={(avatar) => setValue('avatar', avatar)}\r\n                    userName={userName || 'User'}\r\n                   />\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4 border-t\">\r\n                  <Button variant=\"outline\" type=\"button\" onClick={() => setStep('details')} className=\"flex-1\">\r\n                    Voltar\r\n                  </Button>\r\n                  <Button className=\"flex-1\" type=\"submit\" disabled={isLoading}>\r\n                    {isLoading ? 'Criando conta...' : 'Finalizar Cadastro'}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </CardContent>\r\n        {step === 'details' && (\r\n          <CardFooter className=\"flex flex-col gap-2\">\r\n            <div className=\"text-sm text-gray-500 text-center\">\r\n              Já tem uma conta?{' '}\r\n              <Link href=\"/login\" className=\"text-primary hover:underline font-medium\">\r\n                Faça login\r\n              </Link>\r\n            </div>\r\n          </CardFooter>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\reserves\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\simulation\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { MobileLayout } from '@/components/layouts/MobileLayout';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { \r\n  Calculator, \r\n  CreditCard, \r\n  TrendingUp, \r\n  TrendingDown, \r\n  PiggyBank, \r\n  DollarSign, \r\n  Calendar,\r\n  ShoppingCart,\r\n  CheckCircle2,\r\n  XCircle,\r\n  AlertTriangle,\r\n  ArrowRight\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport api from '@/services/api';\r\n\r\n// Types\r\ntype CardSuggestion = {\r\n  card: {\r\n    id: string;\r\n    cardName: string;\r\n    limit: number;\r\n    closingDay: number;\r\n    dueDay: number;\r\n  };\r\n  workable: boolean;\r\n  reason?: string;\r\n  diffDays?: number;\r\n  dueDate?: string;\r\n  closingDate?: string;\r\n};\r\n\r\ntype DashboardSummary = {\r\n  income: number;\r\n  expense: number;\r\n  balance: number;\r\n  reservesTotal: number;\r\n  budgetUsage: number;\r\n};\r\n\r\nexport default function SimulationPage() {\r\n  // State for Tab 1: Purchase Simulation\r\n  const [purchaseValue, setPurchaseValue] = useState('');\r\n  const [installments, setInstallments] = useState('1');\r\n  const [cardSuggestions, setCardSuggestions] = useState<{\r\n    bestCard: CardSuggestion | null;\r\n    others: CardSuggestion[];\r\n    all: CardSuggestion[];\r\n  } | null>(null);\r\n  const [loadingCards, setLoadingCards] = useState(false);\r\n\r\n  // State for Tab 2: Scenarios\r\n  const [dashboardData, setDashboardData] = useState<DashboardSummary | null>(null);\r\n  const [loadingDashboard, setLoadingDashboard] = useState(true);\r\n  const [scenarioIncome, setScenarioIncome] = useState(0);\r\n  const [scenarioExpense, setScenarioExpense] = useState(0);\r\n  const [scenarioNewDebt, setScenarioNewDebt] = useState(0);\r\n\r\n  // State for Tab 3: Calculators\r\n  const [calcInitialValue, setCalcInitialValue] = useState('1000');\r\n  const [calcMonthly, setCalcMonthly] = useState('500');\r\n  const [calcRate, setCalcRate] = useState('1');\r\n  const [calcPeriod, setCalcPeriod] = useState('12');\r\n  const [calcType, setCalcType] = useState<'investment' | 'debt'>('investment');\r\n  const [calcResult, setCalcResult] = useState<{\r\n    finalValue: number;\r\n    totalContributions: number;\r\n    totalInterest: number;\r\n    months: number;\r\n  } | null>(null);\r\n\r\n  // State for Smart Suggestions\r\n  const [smartSuggestions, setSmartSuggestions] = useState<{\r\n    type: 'warning' | 'info' | 'success' | 'tip';\r\n    icon: string;\r\n    title: string;\r\n    description: string;\r\n  }[]>([]);\r\n\r\n  const formatCurrency = (value: number | undefined | null) => {\r\n    const safeValue = Number(value);\r\n    if (isNaN(safeValue)) return 'R$ 0,00';\r\n    return new Intl.NumberFormat('pt-BR', {\r\n      style: 'currency',\r\n      currency: 'BRL'\r\n    }).format(safeValue);\r\n  };\r\n\r\n  // Load dashboard data on mount\r\n  useEffect(() => {\r\n    const loadDashboardData = async () => {\r\n      try {\r\n        const profileId = localStorage.getItem('profileId');\r\n        const response = await api.get('/reports/dashboard-summary', {\r\n          params: { profileId }\r\n        });\r\n        setDashboardData(response.data);\r\n      } catch (error) {\r\n        console.error('Failed to load dashboard data', error);\r\n        toast.error('Erro ao carregar dados financeiros');\r\n      } finally {\r\n        setLoadingDashboard(false);\r\n      }\r\n    };\r\n    loadDashboardData();\r\n  }, []);\r\n\r\n  // Tab 1: Simulate Purchase\r\n  const handleSimulatePurchase = async () => {\r\n    const value = parseFloat(purchaseValue);\r\n    if (!value || value <= 0) {\r\n      toast.error('Informe um valor válido');\r\n      return;\r\n    }\r\n\r\n    setLoadingCards(true);\r\n    setSmartSuggestions([]);\r\n    \r\n    try {\r\n      const response = await api.get('/credit-cards/recommendation', {\r\n        params: { amount: value }\r\n      });\r\n      setCardSuggestions(response.data);\r\n\r\n      // Generate smart suggestions based on impact\r\n      const numInstallments = parseInt(installments) || 1;\r\n      const monthlyImpact = value / numInstallments;\r\n      const income = Number(dashboardData?.income) || 0;\r\n      const currentBalance = Number(dashboardData?.balance) || 0;\r\n      const newBalance = currentBalance - monthlyImpact;\r\n      const percentOfIncome = income > 0 ? (monthlyImpact / income) * 100 : 0;\r\n\r\n      const suggestions: typeof smartSuggestions = [];\r\n\r\n      // Rule 1: Check if balance goes negative\r\n      if (newBalance < 0) {\r\n        suggestions.push({\r\n          type: 'warning',\r\n          icon: '⚠️',\r\n          title: 'Saldo Negativo',\r\n          description: `Esta compra deixaria seu saldo mensal em R$ ${newBalance.toFixed(2)}.`,\r\n        });\r\n      }\r\n\r\n      // Rule 2: Check percentage of income\r\n      if (percentOfIncome > 30) {\r\n        suggestions.push({\r\n          type: 'warning',\r\n          icon: '💳',\r\n          title: 'Parcela Comprometedora',\r\n          description: `A parcela de R$ ${monthlyImpact.toFixed(2)} representa ${percentOfIncome.toFixed(0)}% da sua renda.`,\r\n        });\r\n      } else if (percentOfIncome > 15) {\r\n        suggestions.push({\r\n          type: 'info',\r\n          icon: '💡',\r\n          title: 'Parcela Significativa',\r\n          description: `A parcela representa ${percentOfIncome.toFixed(0)}% da sua renda. Considere mais parcelas.`,\r\n        });\r\n      }\r\n\r\n      // Rule 3: Suggest alternative installments\r\n      if (numInstallments < 18 && percentOfIncome > 10) {\r\n        const altInstallments = Math.min(numInstallments + 6, 24);\r\n        const altMonthly = value / altInstallments;\r\n        suggestions.push({\r\n          type: 'tip',\r\n          icon: '🔢',\r\n          title: 'Alternativa de Parcelamento',\r\n          description: `Em ${altInstallments}x: R$ ${altMonthly.toFixed(2)}/mês (-${((monthlyImpact - altMonthly) / monthlyImpact * 100).toFixed(0)}%)`,\r\n        });\r\n      }\r\n\r\n      // Rule 4: Positive feedback\r\n      if (newBalance > 0 && percentOfIncome <= 15) {\r\n        suggestions.push({\r\n          type: 'success',\r\n          icon: '✅',\r\n          title: 'Compra Viável',\r\n          description: 'Esta compra parece caber no seu orçamento atual!',\r\n        });\r\n      }\r\n\r\n      // Rule 5: Low balance warning\r\n      if (newBalance >= 0 && newBalance < 200) {\r\n        suggestions.push({\r\n          type: 'tip',\r\n          icon: '⏳',\r\n          title: 'Saldo Apertado',\r\n          description: 'Seu saldo ficaria baixo após esta compra. Considere aguardar.',\r\n        });\r\n      }\r\n\r\n      setSmartSuggestions(suggestions);\r\n    } catch (error) {\r\n      console.error('Failed to get card suggestions', error);\r\n      toast.error('Erro ao buscar sugestões de cartão');\r\n    } finally {\r\n      setLoadingCards(false);\r\n    }\r\n  };\r\n\r\n  const getInstallmentImpact = () => {\r\n    const value = parseFloat(purchaseValue) || 0;\r\n    const numInstallments = parseInt(installments) || 1;\r\n    const monthlyImpact = value / numInstallments;\r\n    const currentBalance = Number(dashboardData?.balance) || 0;\r\n    const newBalance = currentBalance - monthlyImpact;\r\n    const income = Number(dashboardData?.income) || 0;\r\n    const percentageOfIncome = income > 0 ? (monthlyImpact / income) * 100 : 0;\r\n\r\n    return { \r\n      monthlyImpact: isNaN(monthlyImpact) ? 0 : monthlyImpact, \r\n      newBalance: isNaN(newBalance) ? 0 : newBalance, \r\n      percentageOfIncome: isNaN(percentageOfIncome) ? 0 : percentageOfIncome,\r\n      hasData: income > 0 || currentBalance > 0\r\n    };\r\n  };\r\n\r\n  // Tab 2: Scenario Comparison\r\n  const getScenarioComparison = () => {\r\n    // Create safe values even without dashboard data\r\n    const currentIncome = Number(dashboardData?.income) || 0;\r\n    const currentExpense = Number(dashboardData?.expense) || 0;\r\n    const currentBalance = currentIncome - currentExpense;\r\n\r\n    const newIncome = currentIncome + (Number(scenarioIncome) || 0);\r\n    const newExpense = currentExpense + (Number(scenarioExpense) || 0) + ((Number(scenarioNewDebt) || 0) / 12);\r\n    const newBalance = newIncome - newExpense;\r\n    const balanceDiff = newBalance - currentBalance;\r\n\r\n    return {\r\n      current: {\r\n        income: currentIncome,\r\n        expense: currentExpense,\r\n        balance: currentBalance\r\n      },\r\n      projected: {\r\n        income: newIncome,\r\n        expense: newExpense,\r\n        balance: newBalance\r\n      },\r\n      diff: {\r\n        income: Number(scenarioIncome) || 0,\r\n        expense: (Number(scenarioExpense) || 0) + ((Number(scenarioNewDebt) || 0) / 12),\r\n        balance: balanceDiff\r\n      }\r\n    };\r\n  };\r\n\r\n  // Tab 3: Calculators\r\n  const handleCalculate = () => {\r\n    const initial = parseFloat(calcInitialValue) || 0;\r\n    const monthly = parseFloat(calcMonthly) || 0;\r\n    const rate = (parseFloat(calcRate) || 0) / 100;\r\n    const months = parseInt(calcPeriod) || 12;\r\n\r\n    if (calcType === 'debt') {\r\n      // Debt payoff calculation\r\n      const debt = initial;\r\n      const payment = monthly;\r\n      \r\n      if (payment <= debt * rate) {\r\n        setCalcResult({\r\n          months: 999,\r\n          finalValue: 0,\r\n          totalContributions: 0,\r\n          totalInterest: 0\r\n        });\r\n        return;\r\n      }\r\n\r\n      let balance = debt;\r\n      let monthCount = 0;\r\n      let totalPaid = 0;\r\n      let totalInterest = 0;\r\n\r\n      while (balance > 0 && monthCount < 360) {\r\n        monthCount++;\r\n        const interest = balance * rate;\r\n        totalInterest += interest;\r\n        balance = balance + interest - payment;\r\n        totalPaid += payment;\r\n        if (balance < 0) {\r\n          totalPaid += balance;\r\n          balance = 0;\r\n        }\r\n      }\r\n\r\n      setCalcResult({\r\n        months: monthCount,\r\n        finalValue: 0,\r\n        totalContributions: totalPaid,\r\n        totalInterest\r\n      });\r\n    } else {\r\n      // Investment calculation\r\n      let balance = initial;\r\n      let totalContributions = initial;\r\n      let totalInterest = 0;\r\n\r\n      for (let i = 1; i <= months; i++) {\r\n        const interest = balance * rate;\r\n        balance += interest + monthly;\r\n        totalContributions += monthly;\r\n        totalInterest += interest;\r\n      }\r\n\r\n      setCalcResult({\r\n        months,\r\n        finalValue: balance,\r\n        totalContributions,\r\n        totalInterest\r\n      });\r\n    }\r\n  };\r\n\r\n  const impact = getInstallmentImpact();\r\n  const scenarioComparison = getScenarioComparison();\r\n\r\n  return (\r\n    <MobileLayout>\r\n      {/* Page Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold tracking-tight flex items-center gap-2\">\r\n          <Calculator className=\"h-6 w-6\" />\r\n          Simulação Financeira\r\n        </h1>\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"purchase\" className=\"w-full\">\r\n        <TabsList className=\"grid w-full grid-cols-3 mb-4\">\r\n          <TabsTrigger value=\"purchase\" className=\"text-xs\">\r\n            <ShoppingCart className=\"h-4 w-4 mr-1\" />\r\n            Compra\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"scenario\" className=\"text-xs\">\r\n            <TrendingUp className=\"h-4 w-4 mr-1\" />\r\n            Cenários\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"calc\" className=\"text-xs\">\r\n            <Calculator className=\"h-4 w-4 mr-1\" />\r\n            Calculadora\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        {/* Tab 1: Purchase Simulation */}\r\n        <TabsContent value=\"purchase\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardHeader className=\"pb-2\">\r\n              <CardTitle className=\"text-base flex items-center gap-2\">\r\n                <CreditCard className=\"h-5 w-5\" />\r\n                Simular Compra Parcelada\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <Label>Valor da Compra (R$)</Label>\r\n                <Input\r\n                  type=\"number\"\r\n                  value={purchaseValue}\r\n                  onChange={(e) => setPurchaseValue(e.target.value)}\r\n                  placeholder=\"1000.00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>Parcelas Desejadas</Label>\r\n                <div className=\"grid grid-cols-6 gap-1 mt-1\">\r\n                  {[1, 2, 3, 6, 10, 12].map(n => (\r\n                    <Button\r\n                      key={n}\r\n                      variant={installments === String(n) ? 'default' : 'outline'}\r\n                      size=\"sm\"\r\n                      onClick={() => setInstallments(String(n))}\r\n                    >\r\n                      {n}x\r\n                    </Button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <Button className=\"w-full\" onClick={handleSimulatePurchase} disabled={loadingCards}>\r\n                {loadingCards ? 'Analisando...' : 'Analisar Melhor Cartão'}\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Impact Preview */}\r\n          {purchaseValue && parseFloat(purchaseValue) > 0 && (\r\n            <Card className=\"border-primary/20 bg-primary/5\">\r\n              <CardContent className=\"p-4\">\r\n                <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n                  <AlertTriangle className=\"h-4 w-4\" />\r\n                  Impacto no Orçamento\r\n                </h3>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"bg-background p-2 rounded\">\r\n                    <p className=\"text-muted-foreground text-xs\">Parcela Mensal</p>\r\n                    <p className=\"font-bold text-lg\">{formatCurrency(impact.monthlyImpact)}</p>\r\n                  </div>\r\n                  <div className=\"bg-background p-2 rounded\">\r\n                    <p className=\"text-muted-foreground text-xs\">% da Receita</p>\r\n                    <p className={`font-bold text-lg ${impact.percentageOfIncome > 30 ? 'text-red-500' : 'text-green-600'}`}>\r\n                      {impact.percentageOfIncome.toFixed(1)}%\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3 p-2 bg-background rounded\">\r\n                  <p className=\"text-xs text-muted-foreground\">Saldo após compra</p>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-muted-foreground\">{formatCurrency(Number(dashboardData?.balance) || 0)}</span>\r\n                    <ArrowRight className=\"h-4 w-4\" />\r\n                    <span className={`font-bold ${impact.newBalance < 0 ? 'text-red-500' : 'text-green-600'}`}>\r\n                      {formatCurrency(impact.newBalance)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                {impact.percentageOfIncome > 30 && (\r\n                  <div className=\"mt-2 text-xs text-amber-600 bg-amber-50 p-2 rounded\">\r\n                    ⚠️ Esta compra representa mais de 30% da sua receita mensal. Considere parcelar em mais vezes.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {/* Card Suggestions */}\r\n          {cardSuggestions && (\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-base\">Sugestão de Cartão</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-3\">\r\n                {cardSuggestions.bestCard ? (\r\n                  <>\r\n                    <div className=\"p-3 border-2 border-green-500 rounded-lg bg-green-50\">\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\r\n                        <span className=\"font-bold text-green-700\">Melhor Opção</span>\r\n                      </div>\r\n                      <p className=\"font-semibold\">{cardSuggestions.bestCard.card.cardName}</p>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {cardSuggestions.bestCard.diffDays} dias até o vencimento\r\n                      </p>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        Limite: {formatCurrency(cardSuggestions.bestCard.card.limit)}\r\n                      </p>\r\n                    </div>\r\n\r\n                    {cardSuggestions.others.length > 0 && (\r\n                      <div className=\"space-y-2\">\r\n                        <p className=\"text-sm text-muted-foreground\">Outras opções:</p>\r\n                        {cardSuggestions.others.map((s, i) => (\r\n                          <div key={i} className=\"p-2 border rounded text-sm\">\r\n                            <p className=\"font-medium\">{s.card.cardName}</p>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                              {s.diffDays} dias • Limite: {formatCurrency(s.card.limit)}\r\n                            </p>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <div className=\"p-3 border border-red-200 rounded-lg bg-red-50\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <XCircle className=\"h-5 w-5 text-red-500\" />\r\n                      <span className=\"text-red-700\">Nenhum cartão com limite disponível</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Installment Recommendation */}\r\n                {parseFloat(purchaseValue) > 0 && (\r\n                  <div className=\"p-3 bg-blue-50 rounded-lg border border-blue-200\">\r\n                    <p className=\"text-sm font-medium text-blue-700 mb-2\">💡 Sugestão de Parcelas</p>\r\n                    <p className=\"text-xs text-blue-600\">\r\n                      {(() => {\r\n                        const value = parseFloat(purchaseValue);\r\n                        const balance = Number(dashboardData?.balance) || 0;\r\n                        const freeBalance = balance > 0 ? balance * 0.3 : value / 6; // Fallback to 6x if no balance\r\n                        const ideal = freeBalance > 0 ? Math.ceil(value / freeBalance) : 6;\r\n                        if (balance <= 0) return \"Sem dados de saldo. Considere parcelar em 6x ou menos.\";\r\n                        if (ideal <= 1) return \"Você pode pagar à vista sem comprometer seu orçamento.\";\r\n                        if (ideal <= 3) return `Parcele em ${ideal}x para manter conforto financeiro.`;\r\n                        if (ideal <= 12) return `Sugerimos ${ideal}x para não impactar demais seu saldo.`;\r\n                        return \"Considere adiar essa compra ou buscar alternativas mais baratas.\";\r\n                      })()}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {/* Smart Suggestions */}\r\n          {smartSuggestions.length > 0 && (\r\n            <Card>\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-base flex items-center gap-2\">\r\n                  💡 Sugestões Inteligentes\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-2\">\r\n                {smartSuggestions.map((suggestion, idx) => {\r\n                  const bgColors = {\r\n                    warning: 'bg-red-50 border-red-200',\r\n                    info: 'bg-blue-50 border-blue-200',\r\n                    success: 'bg-green-50 border-green-200',\r\n                    tip: 'bg-amber-50 border-amber-200',\r\n                  };\r\n                  const textColors = {\r\n                    warning: 'text-red-700',\r\n                    info: 'text-blue-700',\r\n                    success: 'text-green-700',\r\n                    tip: 'text-amber-700',\r\n                  };\r\n                  return (\r\n                    <div \r\n                      key={idx}\r\n                      className={`p-3 rounded-lg border ${bgColors[suggestion.type]}`}\r\n                    >\r\n                      <div className=\"flex items-start gap-2\">\r\n                        <span className=\"text-lg\">{suggestion.icon}</span>\r\n                        <div>\r\n                          <p className={`font-semibold ${textColors[suggestion.type]}`}>\r\n                            {suggestion.title}\r\n                          </p>\r\n                          <p className={`text-sm ${textColors[suggestion.type]} opacity-80`}>\r\n                            {suggestion.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </TabsContent>\r\n\r\n        {/* Tab 2: Scenarios */}\r\n        <TabsContent value=\"scenario\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardHeader className=\"pb-2\">\r\n              <CardTitle className=\"text-base\">Criar Cenário Hipotético</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {loadingDashboard ? (\r\n                <div className=\"space-y-2\">\r\n                  <Skeleton className=\"h-10 w-full\" />\r\n                  <Skeleton className=\"h-10 w-full\" />\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"p-3 bg-muted rounded-lg text-sm\">\r\n                    <p className=\"font-medium mb-1\">Situação Atual:</p>\r\n                    <div className=\"grid grid-cols-3 gap-2 text-center\">\r\n                      <div>\r\n                        <p className=\"text-xs text-muted-foreground\">Receita</p>\r\n                        <p className=\"font-bold text-green-600\">{formatCurrency(Number(dashboardData?.income) || 0)}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-muted-foreground\">Despesa</p>\r\n                        <p className=\"font-bold text-red-600\">{formatCurrency(Number(dashboardData?.expense) || 0)}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-muted-foreground\">Saldo</p>\r\n                        <p className=\"font-bold\">{formatCurrency((Number(dashboardData?.income) || 0) - (Number(dashboardData?.expense) || 0))}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label className=\"flex items-center gap-2\">\r\n                      <TrendingUp className=\"h-4 w-4 text-green-600\" />\r\n                      Adicionar Receita Mensal\r\n                    </Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={scenarioIncome || ''}\r\n                      onChange={(e) => setScenarioIncome(parseFloat(e.target.value) || 0)}\r\n                      placeholder=\"Ex: Aumento de salário\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label className=\"flex items-center gap-2\">\r\n                      <TrendingDown className=\"h-4 w-4 text-red-600\" />\r\n                      Adicionar Despesa Mensal\r\n                    </Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={scenarioExpense || ''}\r\n                      onChange={(e) => setScenarioExpense(parseFloat(e.target.value) || 0)}\r\n                      placeholder=\"Ex: Novo aluguel\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label className=\"flex items-center gap-2\">\r\n                      <CreditCard className=\"h-4 w-4 text-amber-600\" />\r\n                      Nova Dívida (valor total)\r\n                    </Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={scenarioNewDebt || ''}\r\n                      onChange={(e) => setScenarioNewDebt(parseFloat(e.target.value) || 0)}\r\n                      placeholder=\"Ex: Financiamento (divide em 12 meses)\"\r\n                    />\r\n                  </div>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Scenario Comparison */}\r\n          {scenarioComparison && (scenarioIncome > 0 || scenarioExpense > 0 || scenarioNewDebt > 0) && (\r\n            <Card className=\"border-primary/20\">\r\n              <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-base\">Comparativo: Atual vs Projetado</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  {/* Current */}\r\n                  <div className=\"p-3 bg-muted rounded-lg\">\r\n                    <p className=\"text-xs font-medium mb-2 text-center\">ATUAL</p>\r\n                    <div className=\"space-y-1 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-muted-foreground\">Receita</span>\r\n                        <span className=\"text-green-600\">{formatCurrency(scenarioComparison.current.income)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-muted-foreground\">Despesa</span>\r\n                        <span className=\"text-red-600\">{formatCurrency(scenarioComparison.current.expense)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between border-t pt-1\">\r\n                        <span className=\"font-medium\">Saldo</span>\r\n                        <span className=\"font-bold\">{formatCurrency(scenarioComparison.current.balance)}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Projected */}\r\n                  <div className={`p-3 rounded-lg ${scenarioComparison.diff.balance >= 0 ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}>\r\n                    <p className=\"text-xs font-medium mb-2 text-center\">PROJETADO</p>\r\n                    <div className=\"space-y-1 text-sm\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-muted-foreground\">Receita</span>\r\n                        <span className=\"text-green-600\">{formatCurrency(scenarioComparison.projected.income)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-muted-foreground\">Despesa</span>\r\n                        <span className=\"text-red-600\">{formatCurrency(scenarioComparison.projected.expense)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between border-t pt-1\">\r\n                        <span className=\"font-medium\">Saldo</span>\r\n                        <span className={`font-bold ${scenarioComparison.projected.balance >= 0 ? 'text-green-700' : 'text-red-700'}`}>\r\n                          {formatCurrency(scenarioComparison.projected.balance)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Diff Summary */}\r\n                <div className={`mt-3 p-2 rounded text-center ${scenarioComparison.diff.balance >= 0 ? 'bg-green-100' : 'bg-red-100'}`}>\r\n                  <p className=\"text-sm\">\r\n                    {scenarioComparison.diff.balance >= 0 ? '✅' : '⚠️'} Diferença no saldo: \r\n                    <span className={`font-bold ml-1 ${scenarioComparison.diff.balance >= 0 ? 'text-green-700' : 'text-red-700'}`}>\r\n                      {scenarioComparison.diff.balance >= 0 ? '+' : ''}{formatCurrency(scenarioComparison.diff.balance)}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </TabsContent>\r\n\r\n        {/* Tab 3: Calculators */}\r\n        <TabsContent value=\"calc\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardContent className=\"pt-4\">\r\n              <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                <Button\r\n                  variant={calcType === 'investment' ? 'default' : 'outline'}\r\n                  onClick={() => setCalcType('investment')}\r\n                >\r\n                  <PiggyBank className=\"h-4 w-4 mr-2\" />\r\n                  Investimento\r\n                </Button>\r\n                <Button\r\n                  variant={calcType === 'debt' ? 'default' : 'outline'}\r\n                  onClick={() => setCalcType('debt')}\r\n                >\r\n                  <TrendingDown className=\"h-4 w-4 mr-2\" />\r\n                  Quitação\r\n                </Button>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <Label>{calcType === 'debt' ? 'Valor da Dívida' : 'Valor Inicial'} (R$)</Label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={calcInitialValue}\r\n                    onChange={(e) => setCalcInitialValue(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label>{calcType === 'debt' ? 'Pagamento Mensal' : 'Aporte Mensal'} (R$)</Label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={calcMonthly}\r\n                    onChange={(e) => setCalcMonthly(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  <div>\r\n                    <Label>Taxa Mensal (%)</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      step=\"0.1\"\r\n                      value={calcRate}\r\n                      onChange={(e) => setCalcRate(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  {calcType === 'investment' && (\r\n                    <div>\r\n                      <Label>Período (meses)</Label>\r\n                      <Input\r\n                        type=\"number\"\r\n                        value={calcPeriod}\r\n                        onChange={(e) => setCalcPeriod(e.target.value)}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <Button className=\"w-full\" onClick={handleCalculate}>\r\n                  <Calculator className=\"h-4 w-4 mr-2\" />\r\n                  Calcular\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Calculator Result */}\r\n          {calcResult && (\r\n            <Card className=\"border-primary/20 bg-primary/5\">\r\n              <CardContent className=\"p-4\">\r\n                {calcType === 'debt' ? (\r\n                  calcResult.months >= 360 ? (\r\n                    <div className=\"text-center text-red-500 py-4\">\r\n                      <XCircle className=\"h-8 w-8 mx-auto mb-2\" />\r\n                      <p className=\"font-bold\">Pagamento insuficiente!</p>\r\n                      <p className=\"text-sm\">O valor não cobre os juros mensais.</p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"space-y-3\">\r\n                      <div className=\"text-center p-3 bg-background rounded-lg\">\r\n                        <Calendar className=\"h-6 w-6 mx-auto mb-1 text-primary\" />\r\n                        <p className=\"text-2xl font-bold\">{calcResult.months} meses</p>\r\n                        <p className=\"text-xs text-muted-foreground\">para quitar</p>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                        <div className=\"text-center p-2 bg-background rounded\">\r\n                          <p className=\"text-muted-foreground\">Total Pago</p>\r\n                          <p className=\"font-bold\">{formatCurrency(calcResult.totalContributions)}</p>\r\n                        </div>\r\n                        <div className=\"text-center p-2 bg-red-50 rounded\">\r\n                          <p className=\"text-red-600 text-xs\">Juros Pagos</p>\r\n                          <p className=\"font-bold text-red-600\">{formatCurrency(calcResult.totalInterest)}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                ) : (\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"text-center p-4 bg-linear-to-br from-green-500 to-emerald-600 text-white rounded-lg\">\r\n                      <p className=\"text-sm opacity-80\">Valor Final em {calcResult.months} meses</p>\r\n                      <p className=\"text-2xl font-bold\">{formatCurrency(calcResult.finalValue)}</p>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                      <div className=\"text-center p-2 bg-background rounded\">\r\n                        <p className=\"text-muted-foreground text-xs\">Total Investido</p>\r\n                        <p className=\"font-bold\">{formatCurrency(calcResult.totalContributions)}</p>\r\n                      </div>\r\n                      <div className=\"text-center p-2 bg-background rounded\">\r\n                        <p className=\"text-muted-foreground text-xs\">Rendimento</p>\r\n                        <p className=\"font-bold text-green-600\">{formatCurrency(calcResult.totalInterest)}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </TabsContent>\r\n      </Tabs>\r\n    </MobileLayout>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\transactions\\[id]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\transactions\\new\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\app\\transactions\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ProfileNotificationModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ProfileSwitcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\UserAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\auth\\AvatarSelection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\common\\MoneyInput.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":48,"column":11,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":48,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":56,"column":7,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":56,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport * as React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface MoneyInputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  label?: string;\r\n  error?: string;\r\n  value?: number; // External value (controlled)\r\n  onValueChange?: (val: number) => void;\r\n  prefix?: string;\r\n}\r\n\r\nexport const MoneyInput = React.forwardRef<HTMLInputElement, MoneyInputProps>(\r\n  ({ className, label, error, value, onValueChange, ...props }, ref) => {\r\n    // Internal state for formatting\r\n    const [displayValue, setDisplayValue] = React.useState('');\r\n\r\n    React.useEffect(() => {\r\n      if (value !== undefined) {\r\n          // Format initial value\r\n          // Note: This needs careful handling to avoid cursor jumping if we were editing\r\n          // For now, naive implementation: if external value changes, update display\r\n          // In a real robust input, we'd handle cursor position or use a library like react-number-format\r\n          // But \"don't invent stack\" -> we stick to basics + logic.\r\n          \r\n          // Simple logic:\r\n          // Value 123.45 -> \"R$ 123,45\"\r\n          const formatted = new Intl.NumberFormat('pt-BR', {\r\n              style: 'currency',\r\n              currency: 'BRL',\r\n          }).format(value);\r\n          setDisplayValue(formatted.replace('R$', '').trim());\r\n      }\r\n    }, [value]);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      // Get raw input\r\n      let raw = e.target.value;\r\n      \r\n      // Remove everything that is not digit\r\n      raw = raw.replace(/\\D/g, '');\r\n\r\n      if (!raw) {\r\n          setDisplayValue('');\r\n          onValueChange && onValueChange(0);\r\n          return;\r\n      }\r\n\r\n      // Convert to number (cents)\r\n      const numValue = parseInt(raw, 10) / 100;\r\n      \r\n      // Notify parent\r\n      onValueChange && onValueChange(numValue);\r\n\r\n      // We don't update displayValue here immediately to valid BRL string because it might mess up typing?\r\n      // Actually standard pattern for Money Input is:\r\n      // User types \"1\" -> 0,01\r\n      // User types \"12\" -> 0,12\r\n      // User types \"123\" -> 1,23\r\n      \r\n      const formatted = new Intl.NumberFormat('pt-BR', {\r\n          minimumFractionDigits: 2,\r\n          maximumFractionDigits: 2\r\n      }).format(numValue);\r\n      \r\n      setDisplayValue(formatted);\r\n    };\r\n\r\n    return (\r\n      <div className=\"space-y-2\">\r\n        {label && <Label className={error ? 'text-destructive' : ''}>{label}</Label>}\r\n        <div className=\"relative\">\r\n             <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm\">\r\n                 R$\r\n             </span>\r\n             <Input\r\n                inputMode=\"decimal\"\r\n                ref={ref}\r\n                value={displayValue}\r\n                onChange={handleChange}\r\n                className={cn('pl-9', error && 'border-destructive focus-visible:ring-destructive', className)}\r\n                placeholder=\"0,00\"\r\n                {...props}\r\n            />\r\n        </div>\r\n        {error && <p className=\"text-xs text-destructive font-medium\">{error}</p>}\r\n      </div>\r\n    );\r\n  }\r\n);\r\nMoneyInput.displayName = 'MoneyInput';\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\credit-cards\\CreditCardModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\dashboard\\BudgetComparisonChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\dashboard\\ClientDate.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\dashboard\\ClientDate.tsx:11:5\n   9 |\n  10 |   useEffect(() => {\n> 11 |     setDate(new Date());\n     |     ^^^^^^^ Avoid calling setState() directly within an effect\n  12 |   }, []);\n  13 |\n  14 |   if (!date) return <span className=\"opacity-0\">...</span>;","line":11,"column":5,"nodeType":null,"endLine":11,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { format } from 'date-fns';\r\nimport { ptBR } from 'date-fns/locale';\r\n\r\nexport function ClientDate() {\r\n  const [date, setDate] = useState<Date | null>(null);\r\n\r\n  useEffect(() => {\r\n    setDate(new Date());\r\n  }, []);\r\n\r\n  if (!date) return <span className=\"opacity-0\">...</span>;\r\n\r\n  return (\r\n    <>\r\n      {format(date, \"EEEE, d 'de' MMMM 'de' yyyy\", { locale: ptBR })}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\dashboard\\ExpensesChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\dashboard\\MonthlyEvolutionChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\layouts\\MobileLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleTransactionSuccess' is assigned a value but never used.","line":59,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { Home, CreditCard, Plus, Wallet, ArrowLeftRight, MoreHorizontal, X } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Drawer,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerTitle,\r\n  DrawerDescription,\r\n  DrawerTrigger,\r\n  DrawerClose,\r\n} from \"@/components/ui/drawer\"\r\nimport { QuickTransactionModal } from '@/components/transactions/QuickTransactionModal';\r\nimport { TransferModal } from '@/components/transactions/TransferModal';\r\n\r\n\r\ninterface NavItem {\r\n  icon: React.ElementType;\r\n  label: string;\r\n  href: string;\r\n}\r\n\r\nconst navItems: NavItem[] = [\r\n  { icon: Home, label: 'Início', href: '/dashboard' },\r\n  { icon: Wallet, label: 'Contas', href: '/accounts' },\r\n  { icon: CreditCard, label: 'Cartões', href: '/credit-cards' },\r\n  { icon: MoreHorizontal, label: 'Mais', href: '/more' }, \r\n];\r\n\r\nexport function MobileLayout({ children }: { children: React.ReactNode }) {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [transactionModalOpen, setTransactionModalOpen] = useState(false);\r\n  const [transactionType, setTransactionType] = useState<'INCOME' | 'EXPENSE'>('EXPENSE');\r\n  const [transferModalOpen, setTransferModalOpen] = useState(false);\r\n\r\n  const handleOpenTransactionModal = (type: 'INCOME' | 'EXPENSE') => {\r\n    setTransactionType(type);\r\n    setDrawerOpen(false);\r\n    // Small delay to allow drawer to close first\r\n    setTimeout(() => {\r\n      setTransactionModalOpen(true);\r\n    }, 100);\r\n  };\r\n\r\n  const handleOpenTransferModal = () => {\r\n    setDrawerOpen(false);\r\n    setTimeout(() => {\r\n      setTransferModalOpen(true);\r\n    }, 100);\r\n  };\r\n\r\n  const handleTransactionSuccess = () => {\r\n    setTransactionModalOpen(false);\r\n    router.refresh();\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-background pb-[calc(4rem+env(safe-area-inset-bottom))]\">\r\n      {/* Content */}\r\n      <main className=\"flex-1 w-full max-w-md mx-auto p-4 animate-in fade-in\">\r\n        {children}\r\n      </main>\r\n\r\n      {/* Transaction Modals */}\r\n      <QuickTransactionModal\r\n        open={transactionModalOpen}\r\n        onOpenChange={setTransactionModalOpen}\r\n        type={transactionType}\r\n      />\r\n      \r\n      <TransferModal\r\n        open={transferModalOpen}\r\n        onOpenChange={setTransferModalOpen}\r\n        onSuccess={() => router.refresh()}\r\n      />\r\n\r\n      {/* Bottom Nav */}\r\n      <div className=\"fixed bottom-0 left-0 right-0 border-t bg-background/80 backdrop-blur-md z-50 pb-[env(safe-area-inset-bottom)]\">\r\n        <div className=\"flex items-center justify-around h-16 w-full max-w-md mx-auto relative\">\r\n          \r\n          {navItems.slice(0, 2).map((item) => {\r\n            const isActive = pathname.startsWith(item.href);\r\n            return (\r\n              <Link\r\n                key={item.href}\r\n                href={item.href}\r\n                className={cn(\r\n                  \"flex flex-col items-center justify-center w-16 h-full space-y-1 text-xs font-medium transition-colors\",\r\n                  isActive ? \"text-primary\" : \"text-muted-foreground hover:text-foreground\"\r\n                )}\r\n              >\r\n                <item.icon className=\"h-5 w-5\" strokeWidth={isActive ? 2.5 : 2} />\r\n                <span>{item.label}</span>\r\n              </Link>\r\n            );\r\n          })}\r\n\r\n          {/* FAB - Central Action Button */}\r\n          <div className=\"-mt-8\">\r\n             <Drawer open={drawerOpen} onOpenChange={setDrawerOpen}>\r\n                <DrawerTrigger asChild>\r\n                    <Button \r\n                        size=\"icon\" \r\n                        className=\"h-14 w-14 rounded-full shadow-lg border-4 border-background\"\r\n                        aria-label=\"Adicionar\"\r\n                    >\r\n                        <Plus className=\"h-6 w-6\" />\r\n                    </Button>\r\n                </DrawerTrigger>\r\n                <DrawerContent>\r\n                    <DrawerHeader className=\"relative\">\r\n                        <DrawerTitle>Ações Rápidas</DrawerTitle>\r\n                        <DrawerDescription className=\"sr-only\">Selecione uma ação para realizar</DrawerDescription>\r\n                        <DrawerClose asChild>\r\n                          <Button \r\n                            variant=\"ghost\" \r\n                            size=\"icon\" \r\n                            className=\"absolute right-4 top-4 h-8 w-8\"\r\n                          >\r\n                            <X className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </DrawerClose>\r\n                    </DrawerHeader>\r\n                    <div className=\"p-4 pb-8\">\r\n                        <div className=\"grid grid-cols-3 gap-4\">\r\n                            <Button \r\n                              variant=\"outline\" \r\n                              className=\"flex flex-col h-auto py-4 gap-2 w-full border-2 hover:border-green-500 hover:bg-green-50\"\r\n                              onClick={() => handleOpenTransactionModal('INCOME')}\r\n                            >\r\n                                <div className=\"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center\">\r\n                                    <Wallet className=\"h-5 w-5 text-green-600\" />\r\n                                </div>\r\n                                <span className=\"text-sm font-medium\">Receita</span>\r\n                            </Button>\r\n                            <Button \r\n                              variant=\"outline\" \r\n                              className=\"flex flex-col h-auto py-4 gap-2 w-full border-2 hover:border-red-500 hover:bg-red-50\"\r\n                              onClick={() => handleOpenTransactionModal('EXPENSE')}\r\n                            >\r\n                                <div className=\"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center\">\r\n                                    <CreditCard className=\"h-5 w-5 text-red-600\" />\r\n                                </div>\r\n                                <span className=\"text-sm font-medium\">Despesa</span>\r\n                            </Button>\r\n                            <Button \r\n                              variant=\"outline\" \r\n                              className=\"flex flex-col h-auto py-4 gap-2 w-full border-2 hover:border-blue-500 hover:bg-blue-50\"\r\n                              onClick={handleOpenTransferModal}\r\n                            >\r\n                                <div className=\"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center\">\r\n                                    <ArrowLeftRight className=\"h-5 w-5 text-blue-600\" />\r\n                                </div>\r\n                                <span className=\"text-sm font-medium\">Transferir</span>\r\n                            </Button>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground text-center mt-4\">\r\n                            Para mais opções, acesse o menu &quot;Mais&quot;\r\n                        </p>\r\n                    </div>\r\n                </DrawerContent>\r\n             </Drawer>\r\n          </div>\r\n\r\n          {navItems.slice(2).map((item) => {\r\n             const isActive = pathname.startsWith(item.href);\r\n             return (\r\n               <Link\r\n                 key={item.href}\r\n                 href={item.href}\r\n                 className={cn(\r\n                   \"flex flex-col items-center justify-center w-16 h-full space-y-1 text-xs font-medium transition-colors\",\r\n                   isActive ? \"text-primary\" : \"text-muted-foreground hover:text-foreground\"\r\n                 )}\r\n               >\r\n                 <item.icon className=\"h-5 w-5\" strokeWidth={isActive ? 2.5 : 2} />\r\n                 <span>{item.label}</span>\r\n               </Link>\r\n             );\r\n           })}\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\notifications\\NotificationForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\transactions\\QuickTransactionModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\transactions\\TransactionDetailModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\transactions\\TransactionForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\transactions\\TransactionModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\transactions\\TransferModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\currency-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":4,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":4,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[75,162],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\queries\\useAccounts.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Account' is defined but never used.","line":2,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { accountsService, Account, CreateAccountDto } from '@/services/accountsService';\r\n\r\n// Query Keys\r\nexport const accountKeys = {\r\n  all: ['accounts'] as const,\r\n  lists: () => [...accountKeys.all, 'list'] as const,\r\n  list: (profileId?: string) => [...accountKeys.lists(), { profileId }] as const,\r\n  details: () => [...accountKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...accountKeys.details(), id] as const,\r\n  balance: (id: string) => [...accountKeys.detail(id), 'balance'] as const,\r\n  totalBalance: () => [...accountKeys.all, 'totalBalance'] as const,\r\n};\r\n\r\n// Hooks\r\nexport function useAccounts(profileId?: string) {\r\n  return useQuery({\r\n    queryKey: accountKeys.list(profileId),\r\n    queryFn: () => accountsService.getAll(profileId),\r\n  });\r\n}\r\n\r\nexport function useAccount(id: string) {\r\n  return useQuery({\r\n    queryKey: accountKeys.detail(id),\r\n    queryFn: () => accountsService.getById(id),\r\n    enabled: !!id,\r\n  });\r\n}\r\n\r\nexport function useAccountBalance(id: string) {\r\n  return useQuery({\r\n    queryKey: accountKeys.balance(id),\r\n    queryFn: () => accountsService.getBalance(id),\r\n    enabled: !!id,\r\n  });\r\n}\r\n\r\nexport function useTotalBalance() {\r\n  return useQuery({\r\n    queryKey: accountKeys.totalBalance(),\r\n    queryFn: () => accountsService.getTotalBalance(),\r\n  });\r\n}\r\n\r\nexport function useCreateAccount() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (data: CreateAccountDto) => accountsService.create(data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: accountKeys.all });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useUpdateAccount() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<CreateAccountDto> }) =>\r\n      accountsService.update(id, data),\r\n    onSuccess: (_, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: accountKeys.all });\r\n      queryClient.invalidateQueries({ queryKey: accountKeys.detail(variables.id) });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useDeleteAccount() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (id: string) => accountsService.delete(id),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: accountKeys.all });\r\n    },\r\n  });\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\queries\\useCategories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\queries\\useTransactions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Transaction' is defined but never used.","line":2,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { transactionsService, Transaction, CreateTransactionDto } from '@/services/transactionsService';\r\n\r\n// Query Keys\r\nexport const transactionKeys = {\r\n  all: ['transactions'] as const,\r\n  lists: () => [...transactionKeys.all, 'list'] as const,\r\n  list: (filters: Record<string, unknown>) => [...transactionKeys.lists(), filters] as const,\r\n  details: () => [...transactionKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...transactionKeys.details(), id] as const,\r\n};\r\n\r\n// Hooks\r\nexport function useTransactions(filters?: Record<string, unknown>) {\r\n  return useQuery({\r\n    queryKey: transactionKeys.list(filters || {}),\r\n    queryFn: () => transactionsService.getAll(filters),\r\n  });\r\n}\r\n\r\nexport function useTransaction(id: string) {\r\n  return useQuery({\r\n    queryKey: transactionKeys.detail(id),\r\n    queryFn: () => transactionsService.getById(id),\r\n    enabled: !!id,\r\n  });\r\n}\r\n\r\nexport function useCreateTransaction() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (data: CreateTransactionDto) => transactionsService.create(data),\r\n    onSuccess: () => {\r\n      // Invalida todas as queries de transações\r\n      queryClient.invalidateQueries({ queryKey: transactionKeys.all });\r\n      // Também invalida accounts pois saldos podem ter mudado\r\n      queryClient.invalidateQueries({ queryKey: ['accounts'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useUpdateTransaction() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<CreateTransactionDto> }) =>\r\n      transactionsService.update(id, data),\r\n    onSuccess: (_, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: transactionKeys.all });\r\n      queryClient.invalidateQueries({ queryKey: transactionKeys.detail(variables.id) });\r\n      queryClient.invalidateQueries({ queryKey: ['accounts'] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useDeleteTransaction() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (id: string) => transactionsService.delete(id),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: transactionKeys.all });\r\n      queryClient.invalidateQueries({ queryKey: ['accounts'] });\r\n    },\r\n  });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\useAuth.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\useAuth.tsx:28:7\n  26 |     const storedAvatar = localStorage.getItem('userAvatar');\n  27 |     if (token) {\n> 28 |       setIsAuthenticated(true);\n     |       ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |       if (storedName) setUserName(storedName);\n  30 |       if (storedAvatar) setUserAvatar(storedAvatar);\n  31 |     }","line":28,"column":7,"nodeType":null,"endLine":28,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\n\r\ninterface AuthContextType {\r\n  isAuthenticated: boolean;\r\n  login: (token: string, userId: string, userName: string, avatar: string | null, profileId?: string) => void;\r\n  logout: () => void;\r\n  updateUser: (name: string, avatar: string | null) => void;\r\n  loading: boolean;\r\n  userName: string | null;\r\n  userAvatar: string | null;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [userName, setUserName] = useState<string | null>(null);\r\n  const [userAvatar, setUserAvatar] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('accessToken');\r\n    const storedName = localStorage.getItem('userName');\r\n    const storedAvatar = localStorage.getItem('userAvatar');\r\n    if (token) {\r\n      setIsAuthenticated(true);\r\n      if (storedName) setUserName(storedName);\r\n      if (storedAvatar) setUserAvatar(storedAvatar);\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const login = (token: string, userId: string, name: string, avatar: string | null, profileId?: string) => {\r\n    localStorage.setItem('accessToken', token);\r\n    localStorage.setItem('userId', userId);\r\n    localStorage.setItem('userName', name);\r\n    if (avatar) {\r\n      localStorage.setItem('userAvatar', avatar);\r\n      setUserAvatar(avatar);\r\n    } else {\r\n      localStorage.removeItem('userAvatar');\r\n      setUserAvatar(null);\r\n    }\r\n    \r\n    if (profileId) {\r\n        localStorage.setItem('profileId', profileId);\r\n    } else {\r\n        localStorage.removeItem('profileId');\r\n    }\r\n    setUserName(name);\r\n    setIsAuthenticated(true);\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('accessToken');\r\n    localStorage.removeItem('userId');\r\n    localStorage.removeItem('profileId');\r\n    localStorage.removeItem('userName');\r\n    localStorage.removeItem('userAvatar');\r\n    setUserName(null);\r\n    setUserAvatar(null);\r\n    setIsAuthenticated(false);\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  const updateUser = (name: string, avatar: string | null) => {\r\n    localStorage.setItem('userName', name);\r\n    if (avatar) {\r\n      localStorage.setItem('userAvatar', avatar);\r\n      setUserAvatar(avatar);\r\n    } else {\r\n      localStorage.removeItem('userAvatar');\r\n      setUserAvatar(null);\r\n    }\r\n    setUserName(name);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ isAuthenticated, login, logout, updateUser, loading, userName, userAvatar }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\useDataRefresh.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\useFont.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\useFont.tsx:21:7\n  19 |     const savedFont = localStorage.getItem('app-font') as FontType;\n  20 |     if (savedFont && ['geist', 'jakarta'].includes(savedFont)) {\n> 21 |       setFontState(savedFont);\n     |       ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  22 |     }\n  23 |     setMounted(true);\n  24 |   }, []);","line":21,"column":7,"nodeType":null,"endLine":21,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\ntype FontType = 'geist' | 'jakarta';\r\n\r\ninterface FontContextType {\r\n  font: FontType;\r\n  setFont: (font: FontType) => void;\r\n}\r\n\r\nconst FontContext = createContext<FontContextType | undefined>(undefined);\r\n\r\nexport function FontProvider({ children }: { children: React.ReactNode }) {\r\n  const [font, setFontState] = useState<FontType>('geist');\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const savedFont = localStorage.getItem('app-font') as FontType;\r\n    if (savedFont && ['geist', 'jakarta'].includes(savedFont)) {\r\n      setFontState(savedFont);\r\n    }\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  const setFont = (newFont: FontType) => {\r\n    setFontState(newFont);\r\n    localStorage.setItem('app-font', newFont);\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.body.setAttribute('data-font', font);\r\n  }, [font]);\r\n\r\n  if (!mounted) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  return (\r\n    <FontContext.Provider value={{ font, setFont }}>\r\n      {children}\r\n    </FontContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useFont() {\r\n  const context = useContext(FontContext);\r\n  // Return default values during SSG/SSR or when not inside provider\r\n  if (context === undefined) {\r\n    return { font: 'geist' as FontType, setFont: () => {} };\r\n  }\r\n  return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\hooks\\useProfile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\providers\\QueryProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\schemas\\account.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\schemas\\category.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\schemas\\dashboard.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\schemas\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\schemas\\transaction.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\accountsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\backupService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\budgetsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\categoriesService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\creditCardsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\dashboardService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\debtsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\notificationsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\profileService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\recurringTransactionsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\reportsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\reservesService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\transactionsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\sistema-financeiro-pessoal\\frontend\\src\\services\\userService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]